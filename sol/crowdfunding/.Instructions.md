<!DOCTYPE html><html><head><meta property="og:image" content="https://figment.io/wp-content/uploads/2019/08/figment-networks-logo.jpg"/><meta property="og:url" content="https://learn.figment.io/"/><script src="/__ENV.js"></script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css?family=Inter:wght@100;300,400,500,600" data-optimized-fonts="true"/><title>Figment Learn | Build a Crowdfunding platform on Solana</title><meta property="og:title" content="Figment Learn | Build a Crowdfunding platform on Solana"/><meta property="og:description" content="Build a Crowdfunding platform on Solana. Build a better internet"/><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/4cb909efa0ac93f20d5d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4cb909efa0ac93f20d5d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/79bc13063343a274aa51.css" as="style"/><link rel="stylesheet" href="/_next/static/css/79bc13063343a274aa51.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6b373a393185a9574597.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6b373a393185a9574597.css" data-n-p=""/><link rel="preload" href="/_next/static/css/2e1462cf5d48a5326d27.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2e1462cf5d48a5326d27.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-245f049e565ebf942e09.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.50c3b31bc23dfcb1af3f.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.ddb2e14391079c43cb49.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-25fc920f772e67fecae2.js" as="script"/><link rel="preload" href="/_next/static/chunks/dbf3ce33.e6c798310b4bf94aca8d.js" as="script"/><link rel="preload" href="/_next/static/chunks/8e1f0915.34e373399cdc573d23ed.js" as="script"/><link rel="preload" href="/_next/static/chunks/b01fe1c42598008edad838ff30555de8b4c045e1.e2086c787942ad8a7fb9.js" as="script"/><link rel="preload" href="/_next/static/chunks/8b49e28cc21143da57bf00148fda89c72870a32b.637e67a1d5e6f4b98178.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-c104d3c1a7a705b1d881.js" as="script"/><link rel="preload" href="/_next/static/chunks/29107295.29a2f28ca1ff4763c79e.js" as="script"/><link rel="preload" href="/_next/static/chunks/75fc9c18.46f8ef1c317b30a0f302.js" as="script"/><link rel="preload" href="/_next/static/chunks/3b6638a962bc7f327b5fdc74c1facc631713c58f.552218fdee77482c974b.js" as="script"/><link rel="preload" href="/_next/static/chunks/3b6638a962bc7f327b5fdc74c1facc631713c58f_CSS.210d3c80a2b0e2401248.js" as="script"/><link rel="preload" href="/_next/static/chunks/c56c1b39b7bcb663437942577d79998a390126ba.74b349d7ca792dc60ed5.js" as="script"/><link rel="preload" href="/_next/static/chunks/04a1b8442da912f7ea49e1aa011f4dcb94f4da84.d13313c29c2d6a9c983e.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/tutorials/%5Bslug%5D-0d2881e80540e64dc599.js" as="script"/><style data-styled="" data-styled-version="5.3.0">body{margin:0;padding:0;box-sizing:border-box;}/*!sc*/
.row-dragging{background:#fafafa;border:1px solid #ccc;}/*!sc*/
.row-dragging td{padding:16px;}/*!sc*/
.row-dragging .drag-visible{visibility:visible;}/*!sc*/
#nprogress .bar{background:#FFF29B;}/*!sc*/
#nprogress .peg{box-shadow:0 0 10px #FFF29B,0 0 5px #FFF29B;}/*!sc*/
#nprogress .spinner-icon{border-top-color:#FFF29B;border-left-color:#FFF29B;}/*!sc*/
data-styled.g1[id="sc-global-jzNTIk1"]{content:"sc-global-jzNTIk1,"}/*!sc*/
.bpUcHp{text-align:center;font-size:13px;}/*!sc*/
data-styled.g2[id="Bannerstyles__StyledText-sc-1dhriw2-0"]{content:"bpUcHp,"}/*!sc*/
.kuIxyO{font-size:inherit;}/*!sc*/
data-styled.g5[id="Paragraphstyles__StyledParagraph-zdv6oi-0"]{content:"kuIxyO,"}/*!sc*/
.jMJotG{font-size:inherit;}/*!sc*/
data-styled.g7[id="Textstyles__StyledText-sc-9wtfdj-0"]{content:"jMJotG,"}/*!sc*/
.imaZvA.imaZvA.imaZvA{font-size:22px;font-weight:600;text-transform:none;text-align:left;margin-bottom:inherit;}/*!sc*/
@media (min-width:768px){.imaZvA.imaZvA.imaZvA{font-size:40px;}}/*!sc*/
data-styled.g8[id="Titlestyles__StyledTitle-sc-1u4gx0s-0"]{content:"imaZvA,"}/*!sc*/
.dpzUIR{position:relative;padding:0 25px;background-color:transparent;}/*!sc*/
@media (min-width:768px){.dpzUIR{padding:0 56px;}}/*!sc*/
@media (min-width:992px){.dpzUIR{padding:0 72px;}}/*!sc*/
.dpzUIR .Titlestyles__StyledTitle-sc-1u4gx0s-0{color:#000000;}/*!sc*/
.dpzUIR .Paragraphstyles__StyledParagraph-zdv6oi-0{color:#3E454D;}/*!sc*/
.dpzUIR .Textstyles__StyledText-sc-9wtfdj-0{color:#3E454D;}/*!sc*/
.gWiFVx{position:relative;padding:0 25px 25px 25px;background-color:transparent;}/*!sc*/
@media (min-width:768px){.gWiFVx{padding:0 56px 56px 56px;}}/*!sc*/
@media (min-width:992px){.gWiFVx{padding:0 72px 72px 72px;}}/*!sc*/
.gWiFVx .Titlestyles__StyledTitle-sc-1u4gx0s-0{color:#000000;}/*!sc*/
.gWiFVx .Paragraphstyles__StyledParagraph-zdv6oi-0{color:#3E454D;}/*!sc*/
.gWiFVx .Textstyles__StyledText-sc-9wtfdj-0{color:#3E454D;}/*!sc*/
data-styled.g32[id="PageSegmentstyles__StyledPageSegment-sc-8jzwpn-0"]{content:"dpzUIR,gWiFVx,"}/*!sc*/
.hMBrRR{margin-left:auto;margin-right:auto;}/*!sc*/
@media (min-width:1200px){.hMBrRR{max-width:1280px;}}/*!sc*/
data-styled.g33[id="PageSegmentstyles__InnerContainer-sc-8jzwpn-1"]{content:"hMBrRR,"}/*!sc*/
.dhaOJG{padding:2px 10px;font-size:12px;font-weight:500;border:none;border-radius:3px;color:#656C74 !important;background-color:#E8E9EA;margin-bottom:0;}/*!sc*/
.hTFrLl{padding:2px 10px;font-size:12px;font-weight:500;border:none;border-radius:3px;color:black !important;background-color:#F8F5B5;margin-bottom:5px;}/*!sc*/
.fTqueX{padding:2px 10px;font-size:12px;font-weight:500;border:none;border-radius:3px;color:#656C74 !important;background-color:#f3f3f3;margin-bottom:5px;}/*!sc*/
data-styled.g46[id="Tagstyles__StyledTag-sc-16htrx3-0"]{content:"dhaOJG,hTFrLl,fTqueX,"}/*!sc*/
.huEfrn{width:16px;height:16px;}/*!sc*/
data-styled.g47[id="ProtocolLogostyles__StyledImage-sc-1lcpa6r-0"]{content:"huEfrn,"}/*!sc*/
.fPixzz{cursor:pointer;}/*!sc*/
.fPixzz:hover{opacity:0.9;}/*!sc*/
data-styled.g65[id="Logostyles__StyledContainer-gwqb60-0"]{content:"fPixzz,"}/*!sc*/
.dDAwzA{padding:5px 0;}/*!sc*/
data-styled.g68[id="Markdownstyles__StyledListItem-sc-1iemeff-2"]{content:"dDAwzA,"}/*!sc*/
.buDxOg{margin:30px 0;}/*!sc*/
data-styled.g69[id="Markdownstyles__StyledAlert-sc-1iemeff-3"]{content:"buDxOg,"}/*!sc*/
.dHJlmD.dHJlmD.dHJlmD{color:#e0bf00;}/*!sc*/
.dHJlmD.dHJlmD.dHJlmD:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g71[id="Markdownstyles__StyledLink-sc-1iemeff-5"]{content:"dHJlmD,"}/*!sc*/
.kxtoqK{font-size:30px;margin-left:-20px;padding-left:20px;position:relative;}/*!sc*/
.kxtoqK a{visibility:hidden;}/*!sc*/
.kxtoqK:hover a{visibility:visible;}/*!sc*/
data-styled.g72[id="Markdownstyles__StyledH1-sc-1iemeff-6"]{content:"kxtoqK,"}/*!sc*/
.icvCJk{margin-top:1em;margin-bottom:1em;font-size:24px;margin-left:-20px;padding-left:20px;position:relative;}/*!sc*/
.icvCJk a{visibility:hidden;}/*!sc*/
.icvCJk:hover a{visibility:visible;}/*!sc*/
data-styled.g73[id="Markdownstyles__StyledH2-sc-1iemeff-7"]{content:"icvCJk,"}/*!sc*/
.fqEdif{width:auto;max-width:95%;max-height:600px;margin:30px auto;border-radius:5px;box-shadow:rgb(150 150 150) 0 4px 10px;display:block;}/*!sc*/
data-styled.g75[id="Markdownstyles__StyledImage-sc-1iemeff-9"]{content:"fqEdif,"}/*!sc*/
.hPIzE{position:absolute;left:-4px;top:0;}/*!sc*/
.hPIzE svg{color:#777;}/*!sc*/
data-styled.g76[id="Markdownstyles__LinkIcon-sc-1iemeff-10"]{content:"hPIzE,"}/*!sc*/
.fCrkCp{background-color:#ffffff;}/*!sc*/
data-styled.g79[id="MarkdownContentstyles__StyledMarkdownContainer-pis3vj-0"]{content:"fCrkCp,"}/*!sc*/
.cpHBdb{display:none;}/*!sc*/
@media (min-width:1200px){.cpHBdb{display:block;}}/*!sc*/
data-styled.g80[id="MarkdownContentstyles__StyledToCCol-pis3vj-1"]{content:"cpHBdb,"}/*!sc*/
.fKCBTO{margin-bottom:15px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
@media (min-width:1200px){.fKCBTO{display:none;}}/*!sc*/
.fKCBTO .Buttonsstyles__StyledButton-shusyh-0{width:70%;}/*!sc*/
data-styled.g81[id="MarkdownContentstyles__StyledToCButtonContainer-pis3vj-2"]{content:"fKCBTO,"}/*!sc*/
.lkTOom{height:100%;}/*!sc*/
data-styled.g82[id="MarkdownContentstyles__StyledStickyContainer-pis3vj-3"]{content:"lkTOom,"}/*!sc*/
.AHDef{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:90%;margin-bottom:15px;}/*!sc*/
@media (min-width:992px){.AHDef{width:auto;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-bottom:0;}}/*!sc*/
data-styled.g116[id="Navigationstyles__StyledContainer-gklf21-0"]{content:"AHDef,"}/*!sc*/
.eqVMuU{font-size:1.1em;font-weight:400;position:relative;margin-bottom:0;color:white;}/*!sc*/
.eqVMuU a{color:white;}/*!sc*/
.eqVMuU a div.ant-row{margin-left:10px;}/*!sc*/
@media (min-width:992px){.eqVMuU{margin-right:40px;margin-bottom:0;}}/*!sc*/
@media (max-width:500px){.eqVMuU{line-height:1.2rem;text-align:center;font-size:0.9rem;width:100%;}}/*!sc*/
data-styled.g117[id="Navigationstyles__MenuItem-gklf21-1"]{content:"eqVMuU,"}/*!sc*/
.jScmPf{position:absolute;top:-5px;right:-20px;}/*!sc*/
@media (max-width:500px){.jScmPf{top:-4px;right:-10px;}}/*!sc*/
data-styled.g119[id="Navigationstyles__ArrowTopRight-gklf21-3"]{content:"jScmPf,"}/*!sc*/
.cZCHkP{width:100%;background:#212529;}/*!sc*/
data-styled.g120[id="Headerstyles__StyledContainer-sc-144gzv7-0"]{content:"cZCHkP,"}/*!sc*/
.cOBlyk{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (min-width:992px){.cOBlyk.cOBlyk.cOBlyk{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:5px auto;}}/*!sc*/
data-styled.g121[id="Headerstyles__StyledHeader-sc-144gzv7-1"]{content:"cOBlyk,"}/*!sc*/
.iBVSIM{width:150px;padding:10px 0;}/*!sc*/
@media (min-width:992px){.iBVSIM{padding:0;}}/*!sc*/
data-styled.g122[id="Headerstyles__LogoContainer-sc-144gzv7-2"]{content:"iBVSIM,"}/*!sc*/
.kUFsvc{background-color:#212529;}/*!sc*/
data-styled.g123[id="Footerstyles__StyledFooter-sc-430ded-0"]{content:"kUFsvc,"}/*!sc*/
.iIFXAi{margin-bottom:24px;}/*!sc*/
data-styled.g124[id="Footerstyles__TopContainer-sc-430ded-1"]{content:"iIFXAi,"}/*!sc*/
.bbLIkH{width:150px;margin:0 auto 30px;}/*!sc*/
@media (min-width:992px){.bbLIkH{padding-bottom:0;}}/*!sc*/
data-styled.g125[id="Footerstyles__LogoContainer-sc-430ded-2"]{content:"bbLIkH,"}/*!sc*/
.cmElNw{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
@media (min-width:992px){.cmElNw{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}/*!sc*/
.cmElNw .ant-menu-submenu:hover .ant-menu-submenu-title{color:#FFF29B;}/*!sc*/
data-styled.g127[id="SecondaryNavigationstyles__StyledContainer-sc-177t529-0"]{content:"cmElNw,"}/*!sc*/
.GPreh{font-size:1em;font-weight:400;position:relative;margin-bottom:0;}/*!sc*/
.GPreh a{color:#aaa;}/*!sc*/
@media (min-width:992px){.GPreh{margin-right:40px;margin-bottom:0;}}/*!sc*/
data-styled.g128[id="SecondaryNavigationstyles__MenuItem-sc-177t529-1"]{content:"GPreh,"}/*!sc*/
.etQtuQ{width:100%;min-height:100vh;}/*!sc*/
data-styled.g129[id="commonstyles__StyledLayout-sc-1dupar7-0"]{content:"etQtuQ,"}/*!sc*/
.hsAwUX{font-family:'Inter',sans-serif;background:#ffffff;}/*!sc*/
data-styled.g133[id="PublicLayoutstyles__StyledLayout-wjgilc-0"]{content:"hsAwUX,"}/*!sc*/
.kZkqYN{width:100%;-webkit-flex:1;-ms-flex:1;flex:1;}/*!sc*/
data-styled.g134[id="PublicLayoutstyles__ContentContainer-wjgilc-1"]{content:"kZkqYN,"}/*!sc*/
.fgZBTa{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g163[id="slugstyles__StyledTagsContainer-sc-9uep82-5"]{content:"fgZBTa,"}/*!sc*/
.cLilsZ.cLilsZ.cLilsZ{margin-top:5px;margin-bottom:5px;}/*!sc*/
data-styled.g169[id="slugstyles__StyledPageTitle-sc-4m4lro-0"]{content:"cLilsZ,"}/*!sc*/
.jjAvQu.jjAvQu.jjAvQu{margin-bottom:20px;}/*!sc*/
data-styled.g170[id="slugstyles__StyledPageDescription-sc-4m4lro-1"]{content:"jjAvQu,"}/*!sc*/
.dHyFuf{font-size:17px;margin-top:50px;}/*!sc*/
.dHyFuf.dHyFuf.dHyFuf{color:#888;font-weight:normal;margin-bottom:2px;}/*!sc*/
data-styled.g171[id="slugstyles__StyledPageTutorialTitle-sc-4m4lro-2"]{content:"dHyFuf,"}/*!sc*/
.bLOOnw{font-size:13px;color:#A0AEC0;margin:0 0 10px 0;}/*!sc*/
data-styled.g172[id="slugstyles__StyledAuthor-sc-4m4lro-3"]{content:"bLOOnw,"}/*!sc*/
</style><style data-href="https://fonts.googleapis.com/css?family=Inter:wght@100;300,400,500,600">@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hjg.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuI6fAZ9hjg.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYAZ9hjg.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><section class="ant-layout commonstyles__StyledLayout-sc-1dupar7-0 PublicLayoutstyles__StyledLayout-wjgilc-0 etQtuQ hsAwUX"><div data-show="true" class="ant-alert ant-alert-warning ant-alert-no-icon ant-alert-banner" role="alert"><div class="ant-alert-content"><div class="ant-alert-message"><div class="Bannerstyles__StyledText-sc-1dhriw2-0 bpUcHp"><span>ðŸŽ‰ Welcome to the new Figment Learn. Looking for Datahub documentation? Check<!-- --> <a href="https://docs.figment.io/" target="_blank" rel="noreferrer">docs.figment.io</a>. ðŸŽ‰</span></div></div><div class="ant-alert-description"></div></div><button type="button" class="ant-alert-close-icon" tabindex="0"><span role="img" aria-label="close" class="anticon anticon-close"><svg viewBox="64 64 896 896" focusable="false" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg></span></button></div><div id="header" class="Headerstyles__StyledContainer-sc-144gzv7-0 cZCHkP"><div class="PageSegmentstyles__StyledPageSegment-sc-8jzwpn-0 dpzUIR"><div class="PageSegmentstyles__InnerContainer-sc-8jzwpn-1 hMBrRR"><div class="Headerstyles__StyledHeader-sc-144gzv7-1 cOBlyk"><div class="Headerstyles__LogoContainer-sc-144gzv7-2 iBVSIM"><div class="Logostyles__StyledContainer-gwqb60-0 fPixzz"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:44.62962962962963%"></div><noscript><img alt="Figment logo" variant="white" srcSet="/_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=640&amp;q=75 640w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=750&amp;q=75 750w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=828&amp;q=75 828w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=3840&amp;q=75 3840w" src="/images/logo-main.svg" decoding="async" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></noscript><img alt="Figment logo" variant="white" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="Navigationstyles__StyledContainer-gklf21-0 AHDef"><div class="Navigationstyles__MenuItem-gklf21-1 eqVMuU"><a href="/protocols">Protocols</a></div><div class="Navigationstyles__MenuItem-gklf21-1 eqVMuU"><a href="/pathways">Courses</a></div><div class="Navigationstyles__MenuItem-gklf21-1 eqVMuU"><a href="/tutorials">Community Tutorials</a></div><div class="Navigationstyles__MenuItem-gklf21-1 eqVMuU"><a href="https://discord.com/invite/fszyM7K" target="_blank" rel="noreferrer"><div class="ant-row" style="cursor:pointer">Discord<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="Navigationstyles__ArrowTopRight-gklf21-3 jScmPf"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div></a></div></div></div></div></div></div><div class="PublicLayoutstyles__ContentContainer-wjgilc-1 kZkqYN"><div class="PageSegmentstyles__StyledPageSegment-sc-8jzwpn-0 gWiFVx"><div class="PageSegmentstyles__InnerContainer-sc-8jzwpn-1 hMBrRR"><div class="ant-col ant-col-xxl-20 ant-col-xxl-offset-2"><div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 slugstyles__StyledPageTutorialTitle-sc-4m4lro-2 kuIxyO dHyFuf"></div><h4 class="ant-typography Titlestyles__StyledTitle-sc-1u4gx0s-0 slugstyles__StyledPageTitle-sc-4m4lro-0 imaZvA cLilsZ">Build a Crowdfunding platform on Solana</h4><div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 slugstyles__StyledPageDescription-sc-4m4lro-1 kuIxyO jjAvQu">Learn how to create and deploy a Crowdfunding dApp on Solana</div><div class="slugstyles__StyledTagsContainer-sc-9uep82-5 fgZBTa"><div><span fontColor="#656C74" bgColor="#E8E9EA" class="ant-tag Tagstyles__StyledTag-sc-16htrx3-0 dhaOJG"><div class="ant-space ant-space-horizontal ant-space-align-center"><div class="ant-space-item" style="margin-right:8px"><img src="/images/protocols/svg/color/solana.svg" class="ProtocolLogostyles__StyledImage-sc-1lcpa6r-0 huEfrn"/></div><div class="ant-space-item">Solana</div></div></span><span fontColor="black" bgColor="#F8F5B5" class="ant-tag Tagstyles__StyledTag-sc-16htrx3-0 hTFrLl">Intermediate</span><span fontColor="#656C74" bgColor="#f3f3f3" class="ant-tag Tagstyles__StyledTag-sc-16htrx3-0 fTqueX">React</span><span fontColor="#656C74" bgColor="#f3f3f3" class="ant-tag Tagstyles__StyledTag-sc-16htrx3-0 fTqueX">Javascript</span><span fontColor="#656C74" bgColor="#f3f3f3" class="ant-tag Tagstyles__StyledTag-sc-16htrx3-0 fTqueX">Rust</span><span fontColor="#656C74" bgColor="#f3f3f3" class="ant-tag Tagstyles__StyledTag-sc-16htrx3-0 fTqueX">1.5 hours</span></div><div><div class="ant-space ant-space-horizontal ant-space-align-center slugstyles__StyledAuthor-sc-4m4lro-3 bLOOnw"><div class="ant-space-item" style="margin-right:8px"><span style="width:18px;height:18px;line-height:18px;font-size:9px" class="ant-avatar ant-avatar-circle ant-avatar-icon"><span role="img" aria-label="user" class="anticon anticon-user"><svg viewBox="64 64 896 896" focusable="false" data-icon="user" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"></path></svg></span></span></div><div class="ant-space-item"><span>Written by Sushant Chandla</span></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><div><div class="ant-row"><div class="ant-col ant-col-xs-24 ant-col-xl-16"><main class="ant-layout-content MarkdownContentstyles__StyledMarkdownContainer-pis3vj-0 fCrkCp"><div class="MarkdownContentstyles__StyledToCButtonContainer-pis3vj-2 fKCBTO"><button type="button" class="ant-btn Buttonsstyles__StyledButton-shusyh-0 iFGgoJ"><span role="img" aria-label="unordered-list" class="anticon anticon-unordered-list"><svg viewBox="64 64 896 896" focusable="false" data-icon="unordered-list" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"></path></svg></span><span>Show Table of Contents</span></button></div><h1 id="introduction" class="Markdownstyles__StyledH1-sc-1iemeff-6 kxtoqK">Introduction<a href="#introduction"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h1>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We are going to make a CrowdFunding platform like GoFundMe, Kickstarter, and Indiegogo. Our DApp will let people create campaings, Donate SOL to existing campaings and payout to the compaign creator.
We are going to make a Solana program and connect it with our front-end application.</div>
<h1 id="prerequisites" class="Markdownstyles__StyledH1-sc-1iemeff-6 kxtoqK">Prerequisites<a href="#prerequisites"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h1>
<ul>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">React</li>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Javascript</li>
</ul>
<h1 id="requirements" class="Markdownstyles__StyledH1-sc-1iemeff-6 kxtoqK">Requirements<a href="#requirements"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h1>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">The following software is required to complete this tutorial:</div>
<ul>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Git, install it from <a href="https://git-scm.com/downloads" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">HERE</a>.</li>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Solana CLI, install it from <a href="https://docs.solana.com/cli/install-solana-cli-tools#use-solanas-install-tool" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">HERE</a>.</li>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">The Rust toolchain, install it from <a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">HERE</a>.</li>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Node.js (v14.18.1+), install it from <a href="https://nodejs.org/en/download/" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">HERE</a>.</li>
</ul>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">If you already have good knowledge of the Rust programming language, you can skip the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Introduction to Rust</code></span> section. I would still recommend having a quick look at all the code blocks.</div>
</div><div class="ant-alert-description"></div></div></div>
<h1 id="introduction-to-rust" class="Markdownstyles__StyledH1-sc-1iemeff-6 kxtoqK">Introduction to Rust<a href="#introduction-to-rust"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h1>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Rust is a multi-paradigm, high-level, general-purpose programming language designed for performance and safety, especially safe concurrency.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Rust code uses snake case as the conventional style for function and variable names.</div>
<h2 id="installing-rust-on-your-system" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Installing Rust on your system<a href="#installing-rust-on-your-system"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">You can follow this this <a href="https://doc.rust-lang.org/book/ch01-01-installation.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">link</a> for your operating system.</div>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><strong>Note</strong>: If you are using Visual Studio Code (VSCode) you should install the extension <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>matklad.rust-analyzer</code></span>. I have found it to work better than <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Rust-lang.rust</code></span> for code analysis, auto-completion and snippets.</div>
</div><div class="ant-alert-description"></div></div></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Before we start the tutorial, we need to understand some basics of Rust. I have added the link to the <a href="https://doc.rust-lang.org/book/ch00-00-introduction.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Rust book</a> pages if you want to read more about any topic.</div>
<h2 id="basics-data-types-in-rust" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Basics Data types in Rust<a href="#basics-data-types-in-rust"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Rust has four primary scalar types: integers, floating-point numbers, Booleans, and characters.
Integers are <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>u8</code></span>,<span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>u32</code></span>, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>i32</code></span>, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>i64</code></span>, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>usize</code></span>, and the list goes on here basically <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>u</code></span> prefix suggests that we have an unsigned integer and the suffix number tell the number of bits. So <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>u8</code></span> is an unsigned 8-bit number(0 to 255).</div>
<table><thead><tr><th>Length</th><th>Signed</th><th>Unsigned</th></tr></thead><tbody><tr><td>8-bit</td><td>i8</td><td>u8</td></tr><tr><td>16-bit</td><td>i16</td><td>u16</td></tr><tr><td>32-bit</td><td>i32</td><td>u32</td></tr><tr><td>64-bit</td><td>i64</td><td>u64</td></tr><tr><td>128-bit</td><td>i128</td><td>u128</td></tr><tr><td>arch</td><td>isize</td><td>usize</td></tr></tbody></table>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We have <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>f32</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>f64</code></span> for floating-point numbers. <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>bool</code></span> for booleans, and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>char</code></span> for characters.
Rust has 2 types for strings, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>str</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>String</code></span>. <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>String</code></span> is a growable, heap-allocated data structure. <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>str</code></span> is an immutable fixed-length string somewhere in memory.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Read more on <a href="https://doc.rust-lang.org/book/ch03-02-data-types.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Rust book</a>.</div>
<h2 id="creating-a-variable-and-mutability" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Creating a variable and mutability<a href="#creating-a-variable-and-mutability"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We can create a variable with the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>let</code></span> keyword</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6272a4">// The compiler identifies the Rvalue as i32, so it sets the type of variable to i32</span><span>
</span><span></span><span class="token" style="color:#8be9fd">let</span><span> a</span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">we can also set the data type for a variable, eg.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">let</span><span> a </span><span class="token" style="color:#f8f8f2">:</span><span class="token" style="color:#8be9fd">u8</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">In Rust, all the variables are immutable by default. Which means their value can not be changed once set.
And here comes the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>mut</code></span> keyword. We can initialize the variable with <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>let mut</code></span> to have a mutable variable. eg.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6272a4">// This program will compile</span><span>
</span><span></span><span class="token" style="color:#8be9fd">let</span><span> </span><span class="token" style="color:#8be9fd">mut</span><span> a </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>a</span><span class="token" style="color:#f8f8f2">=</span><span>a</span><span class="token" style="color:#f8f8f2">+</span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>a</span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#bd93f9">100</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Read more on <a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Rust book</a>.</div>
<h2 id="control-flow" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Control flow<a href="#control-flow"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We can use <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>if</code></span> <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>else</code></span> statement in Rust just like we can do in other language, here is a small program for us to understand the syntax.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">main</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> a</span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#bd93f9">99</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> a</span><span class="token" style="color:#f8f8f2">%</span><span class="token" style="color:#bd93f9">2</span><span class="token" style="color:#f8f8f2">==</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">println!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Even&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">else</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">println!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Odd&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We also have loops in Rust. We can create a loop with 3 keywords <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>loop</code></span>, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>for</code></span>, and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>while</code></span>. Since <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>for</code></span> is most common. Here is an example of it. You can checkout example for <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>loop</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>while</code></span> <a href="https://doc.rust-lang.org/book/ch03-05-control-flow.html#repeating-code-with-loop" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">here</a>.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">main</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">for</span><span> i </span><span class="token" style="color:#8be9fd">in</span><span> </span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">..</span><span class="token" style="color:#bd93f9">7</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span> </span><span class="token" style="color:#6272a4">// 0..7 is range expression including 0 excluding 7.</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">println!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;variable `i` is : {}&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> i</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Read more on <a href="https://doc.rust-lang.org/book/ch03-05-control-flow.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Rust book</a>.</div>
<h2 id="functions-and-macros" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Functions and Macros<a href="#functions-and-macros"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Function definitions in Rust start with fn and have a set of parentheses after the function name. The curly brackets tell the compiler where the function body begins and ends.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">main</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">another_function</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#bd93f9">5</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">another_function_with_x_and_y</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#bd93f9">2</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">another_function</span><span class="token" style="color:#f8f8f2">(</span><span>x</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#8be9fd">i32</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span class="token" style="color:#6272a4">// input paramter and type</span><span>
</span><span>    </span><span class="token macro" style="color:#ff79c6">println!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;The value of x is: {}&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> x</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">another_function_with_x_and_y</span><span class="token" style="color:#f8f8f2">(</span><span>x</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#8be9fd">i32</span><span class="token" style="color:#f8f8f2">,</span><span>y</span><span class="token" style="color:#f8f8f2">:</span><span class="token" style="color:#8be9fd">i32</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token macro" style="color:#ff79c6">println!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;The value of x is: {} {}&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> x</span><span class="token" style="color:#f8f8f2">,</span><span> y</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">For this tutorial, we can assume macros are also functions. They end with <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>!</code></span>, like <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>println!</code></span> macro, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>format!</code></span> macro, and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>msg!</code></span> macro.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Read more about functions on <a href="https://doc.rust-lang.org/book/ch03-03-how-functions-work.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Rust book</a>.</div>
<h2 id="enums-and-the-match-syntax" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Enums and the match syntax<a href="#enums-and-the-match-syntax"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Rust has enums. They are more than simple enums other languages provide. In Rust, we can even store data in the enums.
Here is the example of <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Result enum</code></span>.
We are going to make use of the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Result</code></span> enum in our program.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6272a4">// Here the pub keyword means it is public.</span><span>
</span><span></span><span class="token" style="color:#6272a4">// We have used generics T and E for data and error type</span><span>
</span><span></span><span class="token" style="color:#8be9fd">pub</span><span> </span><span class="token" style="color:#8be9fd">enum</span><span> </span><span class="token type-definition" style="color:#f1fa8c">Result</span><span class="token" style="color:#f8f8f2">&lt;</span><span class="token" style="color:#f1fa8c">T</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f1fa8c">E</span><span class="token" style="color:#f8f8f2">&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span> 
</span><span>    </span><span class="token" style="color:#f1fa8c">Ok</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">T</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">,</span><span> 
</span><span>    </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">E</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Read more about enums on <a href="https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">rust book</a>.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Here is an enum and match example with an explanation of each line:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">enum</span><span> </span><span class="token type-definition" style="color:#f1fa8c">Coin</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Penny</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Nickel</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Dime</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Custom</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#8be9fd">i32</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#6272a4">// Creating a coin enums</span><span>
</span><span></span><span class="token" style="color:#6272a4">// notice how some values have no parameter</span><span>
</span><span></span><span class="token" style="color:#6272a4">// and how we can have an i32 value stored in `Custom`</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">let</span><span> coin</span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c">Coin</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Custom</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#bd93f9">30</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#8be9fd">let</span><span> coin2 </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#f1fa8c">Coin</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Nickel</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#6272a4">// We can create instances like this</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">let</span><span> a </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">match</span><span> coin </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token" style="color:#f1fa8c">Coin</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Penny</span><span> </span><span class="token" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f1fa8c">Coin</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Nickel</span><span> </span><span class="token" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#bd93f9">5</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f1fa8c">Coin</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Dime</span><span> </span><span class="token" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#bd93f9">10</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f1fa8c">Coin</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Custom</span><span class="token" style="color:#f8f8f2">(</span><span>e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">=&gt;</span><span> e</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#6272a4">// We can use the match syntax to know what type of coin we have  </span><span>
</span><span></span><span class="token" style="color:#6272a4">// and set a corresponding value to the variable `a`.</span><span>
</span>
<span></span><span class="token macro" style="color:#ff79c6">assert_eq!</span><span class="token" style="color:#f8f8f2">(</span><span>a</span><span class="token" style="color:#f8f8f2">,</span><span class="token" style="color:#bd93f9">30</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#6272a4">// In this case a will be equal to 30 because coin is Custom with value 30.</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Read more about match syntax in the <a href="https://doc.Rust-lang.org/book/ch06-02-match.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Rust book</a>.</div>
<h2 id="cargo-and-borsh" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Cargo and Borsh<a href="#cargo-and-borsh"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Cargo is the Rust package manager. We use it to build our program and get dependencies. It also makes adding packages(crates) very easy. Read more about Cargo  in the <a href="https://doc.Rust-lang.org/book/ch01-03-hello-cargo.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Rust book</a></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Borsh stands for Binary Object Representation Serializer for Hashing. It is meant to be used in security-critical projects as it prioritizes consistency, safety, speed, and comes with a strict specification.
We are using it for data serialization and deserialization. Read more about the carte on <a href="https://crates.io/crates/borsh" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">crates.io</a>.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">This is all the Rust we would need to get started with our Solana program.</div>
<h1 id="solana-program" class="Markdownstyles__StyledH1-sc-1iemeff-6 kxtoqK">Solana program<a href="#solana-program"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h1>
<h2 id="setup" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Setup<a href="#setup"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<ol>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">We create a React app. Open your projects directory in the terminal and run</li>
</ol>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>npx create-react-app crowd-funding</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">This creates a React app for us.</div>
<ol start="2">
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Now, we will create our program.</li>
</ol>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">In your projects directory.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>cd crowd-funding
</span>cargo new program --lib
</code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">This will create a new directory called <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>program</code></span>, which is a new Rust project generated by cargo.</div>
<ol start="3">
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We will discuss the front-end side of the project later. Now we can open the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>program</code></span> folder in VSCode.</div>
</li>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Create  <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Xargo.toml</code></span> in the program directory.</div>
</li>
</ol>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">In your <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Xargo.toml</code></span></div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-toml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#f8f8f2">[</span><span class="token table" style="color:#f1fa8c">target.bpfel-unknown-unknown.dependencies.std</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">features</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span></code></div></pre>
<ol start="5">
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Update your <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Cargo.toml</code></span></li>
</ol>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-toml" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#f8f8f2">[</span><span class="token table" style="color:#f1fa8c">package</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">name</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;program&quot;</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">version</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;0.1.0&quot;</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">edition</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;2018&quot;</span><span>
</span>
<span></span><span class="token" style="color:#f8f8f2">[</span><span class="token table" style="color:#f1fa8c">dependencies</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">solana-program</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;1.7.14&quot;</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">borsh</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;0.9.1&quot;</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">borsh-derive</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;0.9.1&quot;</span><span>
</span>
<span></span><span class="token" style="color:#f8f8f2">[</span><span class="token table" style="color:#f1fa8c">features</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">no-entrypoint</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span>
</span>
<span></span><span class="token" style="color:#f8f8f2">[</span><span class="token table" style="color:#f1fa8c">dev-dependencies</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">solana-program-test</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;1.7.14&quot;</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">solana-sdk</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;1.7.14&quot;</span><span>
</span>
<span></span><span class="token" style="color:#f8f8f2">[</span><span class="token table" style="color:#f1fa8c">lib</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span></span><span class="token key" style="color:#ff79c6">crate-type</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&quot;cdylib&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">&quot;lib&quot;</span><span class="token" style="color:#f8f8f2">]</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We have added all the dependencies we are going to need for our program. Run <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>cargo check</code></span> to get all the dependencies. We can now start working in <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>src/lib.rs</code></span> and start coding our program for the Solana blockchain.</div>
<h2 id="what-do-we-want-in-our-program" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">What do we want in our program?<a href="#what-do-we-want-in-our-program"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Before we start writing the code, let us discuss what entry points our crowdfunding app should have.</div>
<ul>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Create a Crowdfunding Campaign.</li>
</ul>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We would need an entry point that anyone can use to create a crowdfunding campaign on our platform. We can have a name, description, and admin fields for it.</div>
<ul>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Withdraw from the Campaign.</li>
</ul>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We would need an entry point for campaign administrators only, so they can withdraw funds.</div>
<ul>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA">Donate to a Campaign.</li>
</ul>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We would need an entry point that can be invoked by anyone to donate to a specific Campaign.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">These are all the entry points we are going to need for our project. Let us discuss how we will be creating these.</div>
<h2 id="where-can-we-store-data" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Where can we store data?<a href="#where-can-we-store-data"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Before we start we have to understand Solana programs don&#x27;t have storage(<span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>contract storage</code></span> you might be familiar with). Then how and where should we store our data.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><strong>Program accounts</strong>
In Solana, data can only be stored in accounts. So we can create program-owned accounts to save the data.</div>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Note: The total number of bytes of data an account can have is fixed when we create an account.</div>
</div><div class="ant-alert-description"></div></div></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">One way to deal with this is to create an Account with very large storage. However if we do that, the maximum data limit for an account is 10 megabytes. If we have enough users, we would eventually run out of storage space. We must think of a way to increase the amount of storage we can use.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We can create as many program-owned accounts as we want, so the idea here is that we will have a size limit for every element in our map. And whenever we want to add a new element we will create a new program-owned account. Program-owned accounts are also called PDA(program-derived accounts).</div>
<h2 id="coding-the-program" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Coding the program<a href="#coding-the-program"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now that we have discussed what we want to create. Let start coding.
Go ahead and open up the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>program</code></span> folder in VSCode or your favorite IDE.
File structure in the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>program</code></span> directory should look like this.
<div><a href="https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-program-files.png?raw=true"><img src="https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-program-files.png?raw=true" alt="file structure" class="Markdownstyles__StyledImage-sc-1iemeff-9 fqEdif"/></a></div></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Go ahead and open up the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>lib.rs</code></span> file in your code editor, and let us add some boilerplate code first.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">You can see the completed code on <a href="https://github.com/SushantChandla/solana-crowd-funding/blob/main/program/src/lib.rs" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">github</a>.</div>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Note: In Rust, we can pass variables as a reference with <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>&amp;</code></span> and get the value of a reference with <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>*</code></span> Operator.</div>
</div><div class="ant-alert-description"></div></div></div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6272a4">// First we include what we are going to need in our program. </span><span>
</span><span></span><span class="token" style="color:#6272a4">// This  is the Rust style of importing things.</span><span>
</span><span></span><span class="token" style="color:#6272a4">// Remember we added the dependencies in cargo.toml</span><span>
</span><span></span><span class="token" style="color:#6272a4">// And from the `solana_program` crate we are including  all the required things.</span><span>
</span><span></span><span class="token" style="color:#8be9fd">use</span><span> </span><span class="token">solana_program</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token">account_info</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f8f8f2">{</span><span>next_account_info</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    entrypoint</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token">entrypoint</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">ProgramResult</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    msg</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token">program_error</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token">pubkey</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token">rent</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Rent</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token">sysvar</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">Sysvar</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#6272a4">// Every solana program has one entry point</span><span>
</span><span></span><span class="token" style="color:#6272a4">// And it is a convention to name it `process_instruction`. </span><span>
</span><span></span><span class="token" style="color:#6272a4">// It should take in program_id, accounts, instruction_data as parameters.</span><span>
</span><span></span><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">process_instruction</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// program id is nothing but the id of this program on the solana network.</span><span>
</span><span>    program_id</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// When we invoke our program we can </span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// give meta data of all the account we </span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// want to work with.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// As you can see it is a array of AccountInfo.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// We can provide as many as we want.</span><span>
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// This is the data we want to process our instruction for.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// It is a list of 8 bitunsigned integers(0..255).</span><span>
</span><span>    instruction_data</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#8be9fd">u8</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span>    
<span>    </span><span class="token" style="color:#6272a4">// Here we specify the return type.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// If you know a little bit of typescript. </span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// This was of writing types and returns types might we familiar to you.</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-&gt;</span><span> </span><span class="token" style="color:#f1fa8c">ProgramResult</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span>    
<span>    </span><span class="token" style="color:#6272a4">// And then since we can&#x27;t return null in Rust we pass `Ok(())` to make it compile</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// It means the program executed successfully.</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Ok</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#6272a4">// Then we call the entry point macro to add `process_instruction` as our entry point to our program.</span><span>
</span><span></span><span class="token macro" style="color:#ff79c6">entrypoint!</span><span class="token" style="color:#f8f8f2">(</span><span>process_instruction</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Note: In Rust, if the last line doesn&#x27;t end with <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>;</code></span> means our function is return-ing that.</div>
</div><div class="ant-alert-description"></div></div></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Here the line <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Ok(())</code></span> is equivalent to <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>return Ok(());</code></span></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">In the code, I have mentioned there is only one entry point in the Solana program.
But we want three as we discussed in the &quot;What do we want in our program?&quot; section. Let&#x27;s fix this issue.
Have you noticed there is no limit to the instruction_data array? We are going to take advantage of that fact. We use the first element of the array to know what entry point we want to call.
Notice we can have 256 entry points like this in a single program (<span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>u8</code></span> has a value of 0..255). Realistically we never do that if in case we want that many entry points for a project. It is better to deploy more programs.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Okay, let&#x27;s do more coding...</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">process_instruction</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    program_id</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    instruction_data</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#8be9fd">u8</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-&gt;</span><span> </span><span class="token" style="color:#f1fa8c">ProgramResult</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// We check if We have a instruction_data len greater than 0 if it is not we do not want to procced.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// So we return Error with InvalidInstructionData message.</span><span>
</span><span>     </span><span class="token" style="color:#8be9fd">if</span><span> instruction_data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">len</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">==</span><span> </span><span class="token" style="color:#bd93f9">0</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">InvalidInstructionData</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// Now we just check and call the function for each of them.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// I have choosen 0 for create_campaign,</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// 1 for withdraw</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// 2 for donate.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> instruction_data</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">]</span><span> </span><span class="token" style="color:#f8f8f2">==</span><span> </span><span class="token" style="color:#bd93f9">0</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">create_campaign</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>            program_id</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            accounts</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#6272a4">/// Notice we pass program_id and accounts as they where </span><span>
</span><span>            </span><span class="token" style="color:#6272a4">// but we pass a reference to slice of [instruction_data]. </span><span>
</span><span>            </span><span class="token" style="color:#6272a4">/// we do not want the first element in any of our functions.</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">&amp;</span><span>instruction_data</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">..</span><span>instruction_data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">len</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span> </span><span class="token" style="color:#8be9fd">else</span><span> </span><span class="token" style="color:#8be9fd">if</span><span> instruction_data</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">]</span><span> </span><span class="token" style="color:#f8f8f2">==</span><span> </span><span class="token" style="color:#bd93f9">1</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">withdraw</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>            program_id</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            accounts</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">&amp;</span><span>instruction_data</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">..</span><span>instruction_data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">len</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span> </span><span class="token" style="color:#8be9fd">else</span><span> </span><span class="token" style="color:#8be9fd">if</span><span> instruction_data</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">]</span><span> </span><span class="token" style="color:#f8f8f2">==</span><span> </span><span class="token" style="color:#bd93f9">2</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">donate</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>            program_id</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            accounts</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">&amp;</span><span>instruction_data</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">..</span><span>instruction_data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">len</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">/// If instruction_data doesn&#x27;t match we give an error.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// Note I have used msg!() macro and passed a string here. </span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// It is good to do this as this would </span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// also get printed in the console window</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// if a program fails.</span><span>
</span><span>    </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Didn&#x27;t find the entrypoint required&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">InvalidInstructionData</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span></span><span class="token macro" style="color:#ff79c6">entrypoint!</span><span class="token" style="color:#f8f8f2">(</span><span>process_instruction</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#6272a4">/// Here, I have created the function for every action we want to do in our program.</span><span>
</span><span></span><span class="token" style="color:#6272a4">/// They take in the same parameters as process_intruction and also have the same return type.</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">create_campaign</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    program_id</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    instruction_data</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#8be9fd">u8</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-&gt;</span><span> </span><span class="token" style="color:#f1fa8c">ProgramResult</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Ok</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">withdraw</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    program_id</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    instruction_data</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#8be9fd">u8</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-&gt;</span><span> </span><span class="token" style="color:#f1fa8c">ProgramResult</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Ok</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">donate</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    program_id</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span> 
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span> 
</span><span>    _instruction_data</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#8be9fd">u8</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-&gt;</span><span> </span><span class="token" style="color:#f1fa8c">ProgramResult</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Ok</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<h2 id="campaign-details-struct" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">CampaignDetails struct<a href="#campaign-details-struct"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We will create a struct in Rust. We have not discussed structs above so, I will explain them here. In Rust, we do not have class. If we want to store more than 1 variable (group variables) we create a struct.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6272a4">/// For an example, let us create human struct.</span><span>
</span><span></span><span class="token attribute" style="color:#50fa7b">#[derive(Debug)]</span><span>
</span><span></span><span class="token" style="color:#8be9fd">struct</span><span> </span><span class="token type-definition" style="color:#f1fa8c">Human</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// we can add all the fields in our struct here.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// we also have to specify the type of each variable.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// Like the [eyes_color] here is a `String` type object.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> eyes_color</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">String</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> name</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">String</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> height</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#8be9fd">i32</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now you must be wondering what is the meaning of <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>#[derive(Debug)]</code></span>. It is interesting to note that we can derive some traits for our struct.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><a href="https://doc.rust-lang.org/rust-by-example/trait.html" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Traits</a> :  A trait in Rust is a group of methods that are defined for a particular type.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now let&#x27;s code our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>CampaignDetails</code></span> struct.
I have added the fields name, admin, description, image_link,amount_donated for our Campaign.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token attribute" style="color:#50fa7b">#[derive(BorshSerialize, BorshDeserialize, Debug)]</span><span>
</span><span></span><span class="token" style="color:#8be9fd">struct</span><span> </span><span class="token type-definition" style="color:#f1fa8c">CampaignDetails</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> admin</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> name</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">String</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> description</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">String</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> image_link</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">String</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// we will be using this to know the total amount </span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// donated to a campaign.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> amount_donated</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#8be9fd">u64</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We need to derive both BorshSerialize and BorshDeserialize. BorshSerialize is used to convert the struct into an <strong>array of u8</strong>, which is the data we can store in Solana accounts. It is also the data we have in <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>instruction_data</code></span> so we can deserialize that to a struct with the help of <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>BorshDeserialize</code></span>.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><strong>Code</strong>:
At the top of the file import <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>BorshSerialize</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>BorshDeserialize</code></span> from the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Borsh</code></span> Crate.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">use</span><span> </span><span class="token">borsh</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f8f8f2">{</span><span class="token" style="color:#f1fa8c">BorshDeserialize</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f1fa8c">BorshSerialize</span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now let&#x27;s add the code of our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>create_campaign</code></span> function and the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>CampaignDetails</code></span> Struct.
I have added an explanation to each line in the code.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token macro" style="color:#ff79c6">entrypoint!</span><span class="token" style="color:#f8f8f2">(</span><span>process_instruction</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span></span><span class="token" style="color:#6272a4">/// We are creating the struct;.</span><span>
</span><span></span><span class="token attribute" style="color:#50fa7b">#[derive(BorshSerialize, BorshDeserialize, Debug)]</span><span>
</span><span></span><span class="token" style="color:#8be9fd">struct</span><span> </span><span class="token type-definition" style="color:#f1fa8c">CampaignDetails</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> admin</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> name</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">String</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> description</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">String</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> image_link</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">String</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> amount_donated</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#8be9fd">u64</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#6272a4">// All the fields are public, which means we can use the `.`  Operator to get/set the values of the fields.</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">create_campaign</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    program_id</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    instruction_data</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#8be9fd">u8</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-&gt;</span><span> </span><span class="token" style="color:#f1fa8c">ProgramResult</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">/// We create a iterator on accounts</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// accounts parameter is the array of accounts related to this entrypoint</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> accounts_iter </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#8be9fd">mut</span><span> accounts</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">iter</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We can use the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>next_account_info</code></span> function to get an account from the array. This function returns a result enum. We can use <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>?</code></span> Operator on the result enum to get the value. If in case of an error the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>?</code></span> Operator will chain the error, and our program will return the same error which was returned by next_account_info.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Solana programs can only write data on a program-owned account. Note that writing_account is a program-owned account.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#6272a4">/// Writing account or we can call it program account.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// This is an account we will create in our front-end.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// This account should br owned by the solana program.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> writing_account </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">next_account_info</span><span class="token" style="color:#f8f8f2">(</span><span>accounts_iter</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">/// Account of the person creating the campaign.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> creator_account </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">next_account_info</span><span class="token" style="color:#f8f8f2">(</span><span>accounts_iter</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">// Now to allow transactions we want the creator account to sign the transaction.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> </span><span class="token" style="color:#f8f8f2">!</span><span>creator_account</span><span class="token" style="color:#f8f8f2">.</span><span>is_signer </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;creator_account should be signer&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">IncorrectProgramId</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// We want to write in this account so we want its owner by the program.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>owner </span><span class="token" style="color:#f8f8f2">!=</span><span> program_id </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;writing_account isn&#x27;t owned by program&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">IncorrectProgramId</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">By deriving the trait <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>BorshDeserialize</code></span> in our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>CampaignDetails</code></span> struct we have added a method <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>try_from_slice</code></span> which takes in the parameter array of u8 and creates an object of CampaignDetails with it.
It gives us an enum of type results. We will use the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>expect</code></span> method on result enums to and pass in the string which we can see in case of error.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">let</span><span> </span><span class="token" style="color:#8be9fd">mut</span><span> input_data </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">CampaignDetails</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">try_from_slice</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">&amp;</span><span>instruction_data</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">expect</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Instruction data serialization didn&#x27;t worked&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">// Now I want that for a campaign created the only admin should be the one who created it.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// You can add additional logical here to check things like</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// The image url should not be null</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// The name shouldn&#x27;t be smaller than some specific length...</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> input_data</span><span class="token" style="color:#f8f8f2">.</span><span>admin </span><span class="token" style="color:#f8f8f2">!=</span><span> </span><span class="token" style="color:#f8f8f2">*</span><span>creator_account</span><span class="token" style="color:#f8f8f2">.</span><span>key </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Invaild instruction data&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">InvalidInstructionData</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Solana accounts can have data, but size has to be specified when it is created.  We need to have a minimum balance to make it rent exempt. For this project, we create an account that already has a balance equal to the minimum balance.
You can read more about solana account and rent exemption <a href="https://docs.solana.com/developing/programming-model/accounts#rent-exemption" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">here</a>.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#6272a4">/// get the minimum balance we need in our program account.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> rent_exemption </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">Rent</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">get</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">minimum_balance</span><span class="token" style="color:#f8f8f2">(</span><span>writing_account</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">data_len</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// And we make sure our program account (`writing_account`) has that much lamports(balance).</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> </span><span class="token" style="color:#f8f8f2">*</span><span class="token" style="color:#f8f8f2">*</span><span>writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>lamports</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">borrow</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">&lt;</span><span> rent_exemption </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;The balance of writing_account should be more then rent_exemption&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">InsufficientFunds</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// Then we can set the initial amount donate to be zero.</span><span>
</span><span>    input_data</span><span class="token" style="color:#f8f8f2">.</span><span>amount_donated</span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">If all goes well, we will write the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>writing_account</code></span>. Here on our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>input_data</code></span> variable (of type <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>CampaignDetails</code></span>), we have a method serialize. this is because of the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>BorshSerialize</code></span> derivation. We will use this to write the data in a <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>writing_account</code></span>. At the end of the program, we can return <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Ok(())</code></span>.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    input_data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">serialize</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#8be9fd">mut</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#8be9fd">mut</span><span> writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">borrow_mut</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">..</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#f1fa8c">Ok</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Hurry! We are done with the first <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>create_campaign</code></span> function.
Let&#x27;s continue writing the contract and write the withdraw function next.</div>
<h2 id="withdraw-function-implementation" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Withdraw function implementation.<a href="#withdraw-function-implementation"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">For the withdraw function also, we create a struct to get the input data. In this case, input data is only the amount we want to withdraw.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token attribute" style="color:#50fa7b">#[derive(BorshSerialize, BorshDeserialize, Debug)]</span><span>
</span><span></span><span class="token" style="color:#8be9fd">struct</span><span> </span><span class="token type-definition" style="color:#f1fa8c">WithdrawRequest</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">pub</span><span> amount</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#8be9fd">u64</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now let us write the function.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">withdraw</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    program_id</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    instruction_data</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#8be9fd">u8</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-&gt;</span><span> </span><span class="token" style="color:#f1fa8c">ProgramResult</span><span> </span><span class="token" style="color:#f8f8f2">{</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">For the withdraw also we will create iterator and get <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>writing_account</code></span> (which is the program owned account) and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>admin_account</code></span>.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">let</span><span> accounts_iter </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#8be9fd">mut</span><span> accounts</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">iter</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> writing_account </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">next_account_info</span><span class="token" style="color:#f8f8f2">(</span><span>accounts_iter</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> admin_account </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">next_account_info</span><span class="token" style="color:#f8f8f2">(</span><span>accounts_iter</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>    
<span>    </span><span class="token" style="color:#6272a4">// We check if the writing account is owned by program.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>owner </span><span class="token" style="color:#f8f8f2">!=</span><span> program_id </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;writing_account isn&#x27;t owned by program&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">IncorrectProgramId</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// Admin account should be the signer in this trasaction.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> </span><span class="token" style="color:#f8f8f2">!</span><span>admin_account</span><span class="token" style="color:#f8f8f2">.</span><span>is_signer </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;admin should be signer&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">IncorrectProgramId</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we will get the data of campaign from the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>writing_account</code></span>. Note that we stored this when we created the campaign with <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>create_campaign</code></span> function.</div>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Note: We are currently thinking of a scenario where a campaign is created and we want to withdraw some money from it.</div>
</div><div class="ant-alert-description"></div></div></div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#6272a4">// Just like we used the try_from_slice for </span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// instruction_data we will use it for the </span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// writing_account&#x27;s data.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> campaign_data </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">CampaignDetails</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">try_from_slice</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">*</span><span>writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">borrow</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">expect</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Error deserializing data&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">// Then we check if the admin_account&#x27;s public key is equal to</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// the public key we have stored in our campaign_data.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> campaign_data</span><span class="token" style="color:#f8f8f2">.</span><span>admin </span><span class="token" style="color:#f8f8f2">!=</span><span> </span><span class="token" style="color:#f8f8f2">*</span><span>admin_account</span><span class="token" style="color:#f8f8f2">.</span><span>key </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Only the account admin can withdraw&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">InvalidAccountData</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<!-- -->
<span>    </span><span class="token" style="color:#6272a4">// Here we make use of the struct we created.</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// We will get the amount of lamports admin wants to withdraw</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> input_data </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">WithdrawRequest</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">try_from_slice</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">&amp;</span><span>instruction_data</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">expect</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Instruction data serialization didn&#x27;t worked&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We do not want the campaign to get deleted after a withdrawal. We want it to always have a minimum balance, So we calculate the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>rent_exemption</code></span> and consider it.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">let</span><span> rent_exemption </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">Rent</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">get</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">minimum_balance</span><span class="token" style="color:#f8f8f2">(</span><span>writing_account</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">data_len</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">/// We check if we have enough funds</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> </span><span class="token" style="color:#f8f8f2">*</span><span class="token" style="color:#f8f8f2">*</span><span>writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>lamports</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">borrow</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-</span><span> rent_exemption </span><span class="token" style="color:#f8f8f2">&lt;</span><span> input_data</span><span class="token" style="color:#f8f8f2">.</span><span>amount </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Insufficent balance&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">InsufficientFunds</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">/// Transfer balance</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">/// We will decrease the balance of the program account, and increase the admin_account balance.</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">*</span><span class="token" style="color:#f8f8f2">*</span><span>writing_account</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">try_borrow_mut_lamports</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span> </span><span class="token" style="color:#f8f8f2">-=</span><span> input_data</span><span class="token" style="color:#f8f8f2">.</span><span>amount</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">*</span><span class="token" style="color:#f8f8f2">*</span><span>admin_account</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">try_borrow_mut_lamports</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span> </span><span class="token" style="color:#f8f8f2">+=</span><span> input_data</span><span class="token" style="color:#f8f8f2">.</span><span>amount</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">Ok</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Note: We can only decrease the balance of a program-owned account.</div>
</div><div class="ant-alert-description"></div></div></div>
<h2 id="donate-to-a-campaign" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Donate to a campaign<a href="#donate-to-a-campaign"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We want to donate to a campaign, however we can&#x27;t decrease the balance of an account not owned by our program in our program. This means we can&#x27;t just transfer the balance as we did in the withdraw function.
<a href="https://docs.solana.com/developing/programming-model/runtime#policy" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Solana policies</a> state: &quot;An account not assigned to the program cannot have its balance decrease.&quot;</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">So for this, we will create a program-owned account in our front-end and then perform the SOL token transaction.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">fn</span><span> </span><span class="token function-definition" style="color:#f1fa8c">donate</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    program_id</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f1fa8c">Pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f1fa8c">AccountInfo</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    _instruction_data</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#8be9fd">u8</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">-&gt;</span><span> </span><span class="token" style="color:#f1fa8c">ProgramResult</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> accounts_iter </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#8be9fd">mut</span><span> accounts</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">iter</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> writing_account </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">next_account_info</span><span class="token" style="color:#f8f8f2">(</span><span>accounts_iter</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> donator_program_account </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">next_account_info</span><span class="token" style="color:#f8f8f2">(</span><span>accounts_iter</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> donator </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">next_account_info</span><span class="token" style="color:#f8f8f2">(</span><span>accounts_iter</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We get 3 accounts here, first is the program-owned account containing the data of campaign we want to donate to.
Then we have a <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>donator_program_account</code></span> which is also the program-owned account that only has the Lamport we would like to donate.
Then we have the account of the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>donator</code></span>.</div>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Note: When we will create it in our front-end, although we do not want to store anything in it we will assign it some size. That is so it gets automatically deleted after the SOL token has been transferred. Then we want the donator account to sign this transaction.</div>
</div><div class="ant-alert-description"></div></div></div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>  </span><span class="token" style="color:#8be9fd">if</span><span> writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>owner </span><span class="token" style="color:#f8f8f2">!=</span><span> program_id </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;writing_account isn&#x27;t owned by program&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">IncorrectProgramId</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> donator_program_account</span><span class="token" style="color:#f8f8f2">.</span><span>owner </span><span class="token" style="color:#f8f8f2">!=</span><span> program_id </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;donator_program_account isn&#x27;t owned by program&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">IncorrectProgramId</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">if</span><span> </span><span class="token" style="color:#f8f8f2">!</span><span>donator</span><span class="token" style="color:#f8f8f2">.</span><span>is_signer </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token macro" style="color:#ff79c6">msg!</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;donator should be signer&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f1fa8c">Err</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f1fa8c">ProgramError</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">IncorrectProgramId</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Here we get the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>campaign_data</code></span> and we will increment the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>amount_donated</code></span>, as the total amount of data donated to this campaign will increase.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> </span><span class="token" style="color:#8be9fd">let</span><span> </span><span class="token" style="color:#8be9fd">mut</span><span> campaign_data </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">CampaignDetails</span><span class="token" style="color:#f8f8f2">::</span><span class="token" style="color:#f1fa8c">try_from_slice</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">*</span><span>writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">borrow</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">expect</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;Error deserializing data&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    campaign_data</span><span class="token" style="color:#f8f8f2">.</span><span>amount_donated </span><span class="token" style="color:#f8f8f2">+=</span><span> </span><span class="token" style="color:#f8f8f2">*</span><span class="token" style="color:#f8f8f2">*</span><span>donator_program_account</span><span class="token" style="color:#f8f8f2">.</span><span>lamports</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">borrow</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Then we do the actual transaction. Note that the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>donator_program_account</code></span> is owned by program so it can decrease its Lamports.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> </span><span class="token" style="color:#f8f8f2">*</span><span class="token" style="color:#f8f8f2">*</span><span>writing_account</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">try_borrow_mut_lamports</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span> </span><span class="token" style="color:#f8f8f2">+=</span><span> </span><span class="token" style="color:#f8f8f2">*</span><span class="token" style="color:#f8f8f2">*</span><span>donator_program_account</span><span class="token" style="color:#f8f8f2">.</span><span>lamports</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">borrow</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span> </span><span class="token" style="color:#f8f8f2">*</span><span class="token" style="color:#f8f8f2">*</span><span>donator_program_account</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">try_borrow_mut_lamports</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Then at the end of the program we will write the new updated <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>campaign_data</code></span> to the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>writing_account</code></span>&#x27;s data field and return the result <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Ok(())</code></span>.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-rust" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    campaign_data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">serialize</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#8be9fd">mut</span><span> </span><span class="token" style="color:#f8f8f2">&amp;</span><span class="token" style="color:#8be9fd">mut</span><span> writing_account</span><span class="token" style="color:#f8f8f2">.</span><span>data</span><span class="token" style="color:#f8f8f2">.</span><span class="token" style="color:#f1fa8c">borrow_mut</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">..</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">?</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#f1fa8c">Ok</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Hooray, We have completed our Solana program, Now we can go ahead and deploy it.</div>
<h2 id="deploy-solana-program" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Deploy Solana program.<a href="#deploy-solana-program"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We are going to deploy the program on Devnet.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Solana Programs work on a <a href="https://docs.solana.com/developing/on-chain-programs/overview#berkeley-packet-filter-bpf" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">BPF system</a>, so we will compile our program into a compatible format.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We can use the handy package manager cargo to do this:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>cargo build-bpf --manifest-path=Cargo.toml --bpf-out-dir=dist/program</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We can use this command to create a build. In this command, the manifest-path should be the path of your <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Cargo.toml</code></span> file.
This will output the compiled program in Shared Object format (.so) in the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>dist/program</code></span> directory.</div>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">If you run this command in the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>program</code></span> directory, you will see the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>dist/program</code></span> directory is created automatically if it does not already exist.</div>
</div><div class="ant-alert-description"></div></div></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><div><a href="https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-program-complied-bpf.png?raw=true"><img src="https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-program-complied-bpf.png?raw=true" alt="program_complied-bpf" class="Markdownstyles__StyledImage-sc-1iemeff-9 fqEdif"/></a></div></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now that we have compiled our program we can deploy it.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">You will need the <a href="https://docs.solana.com/cli/install-solana-cli-tools#use-solanas-install-tool" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Solana CLI</a> installed.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We will create a new Solana account to deploy the program. Run the following command:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>solana-keygen new -o keypair.json</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">The command will prompt you for a passphrase to secure the recovery seed phrase:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>Generating a new keypair
</span>
<!-- -->For added security, enter a BIP39 passphrase
<!-- -->
<!-- -->NOTE! This passphrase improves security of the recovery seed phrase NOT the
<!-- -->keypair file itself, which is stored as insecure plain text
<!-- -->
<!-- -->BIP39 Passphrase (empty for none):
</code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">You can choose a passphrase or leave it empty. Continuing will provide both the public key of the account and the seed phrase used to create the private key:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>Wrote new keypair to keypair.json
</span>=====================================================================
<!-- -->pubkey: 7WQDnydTTtyb2DsTuuFpeu2bDxQdpZMRc4R6qja1UzP
<!-- -->=====================================================================
<!-- -->Save this seed phrase and your BIP39 passphrase to recover your new keypair:
<!-- -->lemon avoid all erase chair acid fire govern glue outside wheel clock
<!-- -->=====================================================================
</code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Once complete you will have the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>keypair.json</code></span> file, containing the private and public key of a new Solana account. It is important to keep your keypair safe. Do not commit this file to a remote code repository. It is best to add this file to a <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>.gitignore</code></span> to prevent this from happening.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we are going to request an airdrop of SOL tokens on the Solana Devnet. This command will add 1 SOL token to the account:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>solana airdrop 1 &lt;YourPublicKey&gt; --url https://api.devnet.solana.com </span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Example</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>solana airdrop 1 7WQDnydTTtyb2DsTuuFpeu2bDxQdpZMRc4R6qja1UzP --url https://api.devnet.solana.com </span></code></div></pre>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">If you are getting an error: &quot;<strong>RPC request error</strong>: cluster version query failed: error sending request for url (<a href="https://api.devnet.solana.com/" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">https://api.devnet.solana.com/</a>): error trying to connect: dns error: failed to lookup address information: nodename nor servname provided, or not known.&quot; - Please consider switching your primary DNS server over to one of Google, DNSWatch, OpenDNS, SAFEDNS, Dyn, Yandex, AdGuard, or Cloudflare.</div>
</div><div class="ant-alert-description"></div></div></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">If you get <strong>insufficient balance</strong> while deploying, you can re-run the command to airdrop funds on Devnet.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we will use the following command to deploy. Note that the path of <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>keypair.json</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>dist/program/program.so</code></span> might be different in your case. Please check and then run the command.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>solana deploy --keypair keypair.json dist/program/program.so --url https://api.devnet.solana.com </span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Hooray! we have deployed our program.
We will get the program id as output.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>Program Id: 286rapsUbvDe1ZgBeNhp37YHvEPwWPTr4Bkce4oMpUKT</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We can verify this by checking on the <a href="https://explorer.solana.com/?cluster=devnet" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Solana Explorer for Devnet.</a>.
We can search our program id here.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Hooray! We have completed everything to do with Rust for this tutorial and successfully deployed our program. Now, let us move forward and build the React app.</div>
<h1 id="front-end-with-solana-web3-js" class="Markdownstyles__StyledH1-sc-1iemeff-6 kxtoqK">Front-end with Solana web3.js<a href="#front-end-with-solana-web3-js"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h1>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We have created a React app, so we can open the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>crowd-funding</code></span> directory in our code editor.
This is not a React tutorial, so we will not go into the details of React. But I will be explaining what we are going to do.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Let&#x27;s first clean our project. We will remove <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>setupTests.js</code></span>, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>reportWebVitals.js</code></span>, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>logo.svg</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>app.test.js</code></span>. Also remove the usage of <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>reportWebVitals.js</code></span> in index.js. Now the project should look like:</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><div><a href="https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-frontend-files.png?raw=true"><img src="https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-frontend-files.png?raw=true" alt="front-end-project" class="Markdownstyles__StyledImage-sc-1iemeff-9 fqEdif"/></a></div></div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We will create a basic UI for the app. I have used sementic-ui to do that.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">If you want the UI part only and continue on with integrating the Solana web3.js library, you can use the UI template I created for you from this <a href="https://github.com/SushantChandla/solana-crowd-funding/tree/ui" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">GitHub branch</a>.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><strong>@solana/web3.js</strong>
Let us add the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>@solana/web3.js</code></span> package.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>yarn add @solana/web3.js</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We will also use the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>@project-serum/sol-wallet-adapter</code></span> package to connect our app with sollet wallet.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>yarn add @project-serum/sol-wallet-adapter</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">And we will also need borsh for serialization and deserialization.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-text" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>yarn add borsh</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Let us create a new directory named <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>solana</code></span> in our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>crowd-funding/src</code></span> directory. We will write all the Solana related code in this folder for easy reference.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Create a new file in the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>solana</code></span> directory, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>index.js</code></span>, and add the following code:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">import</span><span> </span><span class="token imports maybe-class-name">Wallet</span><span> </span><span class="token module" style="color:#8be9fd">from</span><span> </span><span class="token" style="color:#50fa7b">&quot;@project-serum/sol-wallet-adapter&quot;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token module" style="color:#8be9fd">import</span><span> </span><span class="token imports" style="color:#f8f8f2">{</span><span class="token imports">
</span><span class="token imports">    </span><span class="token imports maybe-class-name">Connection</span><span class="token imports" style="color:#f8f8f2">,</span><span class="token imports">
</span><span class="token imports">    </span><span class="token imports maybe-class-name">SystemProgram</span><span class="token imports" style="color:#f8f8f2">,</span><span class="token imports">
</span><span class="token imports">    </span><span class="token imports maybe-class-name">Transaction</span><span class="token imports" style="color:#f8f8f2">,</span><span class="token imports">
</span><span class="token imports">    </span><span class="token imports maybe-class-name">PublicKey</span><span class="token imports" style="color:#f8f8f2">,</span><span class="token imports">
</span><span class="token imports">    </span><span class="token imports maybe-class-name">TransactionInstruction</span><span class="token imports">
</span><span class="token imports"></span><span class="token imports" style="color:#f8f8f2">}</span><span> </span><span class="token module" style="color:#8be9fd">from</span><span> </span><span class="token" style="color:#50fa7b">&quot;@solana/web3.js&quot;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token module" style="color:#8be9fd">import</span><span> </span><span class="token imports" style="color:#f8f8f2">{</span><span class="token imports"> deserialize</span><span class="token imports" style="color:#f8f8f2">,</span><span class="token imports"> serialize </span><span class="token imports" style="color:#f8f8f2">}</span><span> </span><span class="token module" style="color:#8be9fd">from</span><span> </span><span class="token" style="color:#50fa7b">&quot;borsh&quot;</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Solana calls its networks <strong>clusters</strong>, if you have by any chance deployed the program on testnet/mainnet, you will need to change the cluster variable to the URL for that cluster.
Also update the programId, this should be the public key you got after deploying your program.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">const</span><span> cluster </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;https://api.devnet.solana.com&quot;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#8be9fd">const</span><span> connection </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">Connection</span><span class="token" style="color:#f8f8f2">(</span><span>cluster</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">&quot;confirmed&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#8be9fd">const</span><span> wallet </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">Wallet</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;https://www.sollet.io&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> cluster</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#8be9fd">const</span><span> programId</span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">PublicKey</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>	</span><span class="token" style="color:#50fa7b">&quot;286rapsUbvDe1ZgBeNhp37YHvEPwWPTr4Bkce4oMpUKT&quot;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Next, create two helper functions: <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>setPayerAndBlockhashTrasaction</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>signAndSendTrasaction</code></span>.
The <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>setPayerAndBlockhashTransaction</code></span> takes in <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>instructions</code></span> as parameters. <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>instructions</code></span> will contain all the instructions we want to perform in this transaction.</div>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Note: If any of the instructions fails with a program error, all the instructions in the transaction fail.</div>
</div><div class="ant-alert-description"></div></div></div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">export</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#8be9fd">function</span><span> </span><span class="token" style="color:#f1fa8c">setPayerAndBlockhashTransaction</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">instructions</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">const</span><span> transaction </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">Transaction</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    instructions</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">forEach</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">element</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        transaction</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">add</span><span class="token" style="color:#f8f8f2">(</span><span>element</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    transaction</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">feePayer</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> hash </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> connection</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">getRecentBlockhash</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    transaction</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">recentBlockhash</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> hash</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">blockhash</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#8be9fd">return</span><span> transaction</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>setPayerAndBlockhashTransaction</code></span> returns the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>transaction</code></span> object containing the instructions and we can pass it to the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>signAndSendTransaction</code></span> function to make our transaction.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">export</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#8be9fd">function</span><span> </span><span class="token" style="color:#f1fa8c">signAndSendTransaction</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">transaction</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#8be9fd">try</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;start signAndSendTransaction&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">let</span><span> signedTrans </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">signTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>transaction</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;signed transaction&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">let</span><span> signature </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> connection</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">sendRawTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>            signedTrans</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">serialize</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;end signAndSendTransaction&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#8be9fd">return</span><span> signature</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span> </span><span class="token control-flow" style="color:#8be9fd">catch</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span>err</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;signAndSendTransaction error&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> err</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#8be9fd">throw</span><span> err</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<h2 id="writing-a-function-to-invoke-create_campaign-instruction" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Writing a function to invoke create_campaign instruction.<a href="#writing-a-function-to-invoke-create_campaign-instruction"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We need to write a JavaScript implementation for the Rust struct <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>CampaignDetails</code></span>. We have created a class and we will call it <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>CampaignDetails</code></span>. For deserialization and serialization we have to create a schema for our class. We will create map, and match the types of each field. Note that <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>PubKey</code></span> type is nothing but a u8 array with length 32.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">class</span><span> </span><span class="token" style="color:#f1fa8c">CampaignDetails</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">constructor</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">properties</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token known-class-name" style="color:#f1fa8c">Object</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">keys</span><span class="token" style="color:#f8f8f2">(</span><span>properties</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">forEach</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">key</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            </span><span class="token" style="color:#8be9fd">this</span><span class="token" style="color:#f8f8f2">[</span><span>key</span><span class="token" style="color:#f8f8f2">]</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> properties</span><span class="token" style="color:#f8f8f2">[</span><span>key</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">static</span><span> schema </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">Map</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">[</span><span class="token maybe-class-name">CampaignDetails</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            kind</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#50fa7b">&#x27;struct&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            fields</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span>
</span><span>                </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&#x27;admin&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">32</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&#x27;name&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">&#x27;string&#x27;</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&#x27;description&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">&#x27;string&#x27;</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&#x27;image_link&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">&#x27;string&#x27;</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&#x27;amount_donated&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">&#x27;u64&#x27;</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we can write our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>createCampaign</code></span> function.
This function takes <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>name</code></span>,<span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>description</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>image_link</code></span> as input parameters.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">The first thing we will do it to add a call to <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>checkWallet</code></span> function.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">export</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#8be9fd">function</span><span> </span><span class="token" style="color:#f1fa8c">createCampaign</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    </span><span class="token parameter">name</span><span class="token parameter" style="color:#f8f8f2">,</span><span class="token parameter"> description</span><span class="token parameter" style="color:#f8f8f2">,</span><span class="token parameter"> image_link</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>     </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">checkWallet</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">checkWallet function:</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We will check if the wallet is connected or not, and connect if it isn&#x27;t.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#8be9fd">function</span><span> </span><span class="token" style="color:#f1fa8c">checkWallet</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#8be9fd">if</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">!</span><span>wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">connected</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#8be9fd">await</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">connect</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We will create a pubkey for our program account which will contain the data of a campaign, this is <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>writing_account</code></span> we have used in our program.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">const</span><span> </span><span class="token" style="color:#ff79c6">SEED</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;abcdef&quot;</span><span> </span><span class="token" style="color:#f8f8f2">+</span><span> </span><span class="token known-class-name" style="color:#f1fa8c">Math</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">random</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">toString</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> newAccount </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token maybe-class-name">PublicKey</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">createWithSeed</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>        wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#ff79c6">SEED</span><span class="token" style="color:#f8f8f2">,</span><span>
</span>        programId
<span>    </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we have created a publicKey. Note that we have not given an instruction to create an account yet.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Let us setup the campaignDetails we want to send to our program.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">let</span><span> campaign </span><span class="token" style="color:#f8f8f2">=</span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">CampaignDetails</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        name</span><span class="token" style="color:#f8f8f2">:</span><span> name</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        description</span><span class="token" style="color:#f8f8f2">:</span><span> description</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        image_link</span><span class="token" style="color:#f8f8f2">:</span><span> image_link</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        admin</span><span class="token" style="color:#f8f8f2">:</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">toBuffer</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        amount_donated</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">0</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Convert the data to <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Uint8Array</code></span>. Note that all the programs have the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>instruction_data</code></span> datatype, an array of u8.
And before we send this data remember we want the first element in our instruction_data to be (0,1,2) for calling different entry points.
We will set it to 0. As we want to call <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>create_campaign</code></span> instruction.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">let</span><span> data </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">serialize</span><span class="token" style="color:#f8f8f2">(</span><span class="token maybe-class-name">CampaignDetails</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">schema</span><span class="token" style="color:#f8f8f2">,</span><span> campaign</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> data_to_send </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">Uint8Array</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token spread" style="color:#f8f8f2">...</span><span>data</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we have the data we want to send to our program.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We will fund it with the minimum number of lamports required to make it rent Exempt.
So we calculate the lamports required like this.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">const</span><span> lamports </span><span class="token" style="color:#f8f8f2">=</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">(</span><span class="token control-flow" style="color:#8be9fd">await</span><span> connection</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">getMinimumBalanceForRentExemption</span><span class="token" style="color:#f8f8f2">(</span><span>data</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">length</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Here we create the instruction to create our account we will pass in the pub key, the size of data it needs to store, initial lamports, and other parameters.
This is the first instruction we will create.</div>
<div data-show="true" class="ant-alert ant-alert-info Markdownstyles__StyledAlert-sc-1iemeff-3 buDxOg" role="alert"><span role="img" aria-label="info-circle" class="anticon anticon-info-circle ant-alert-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="info-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span><div class="ant-alert-content"><div class="ant-alert-message">
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Note: Only system program can create accounts. We are writing instruction for system program here and not our deployed program.</div>
</div><div class="ant-alert-description"></div></div></div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">const</span><span> createProgramAccount </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token maybe-class-name">SystemProgram</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">createAccountWithSeed</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        fromPubkey</span><span class="token" style="color:#f8f8f2">:</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        basePubkey</span><span class="token" style="color:#f8f8f2">:</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        seed</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#ff79c6">SEED</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        newAccountPubkey</span><span class="token" style="color:#f8f8f2">:</span><span> newAccount</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        lamports</span><span class="token" style="color:#f8f8f2">:</span><span> lamports</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        space</span><span class="token" style="color:#f8f8f2">:</span><span> data</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">length</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        programId</span><span class="token" style="color:#f8f8f2">:</span><span> programId</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we can create the 2nd instruction. We invoke our program that would write the data to the program account we just created in the above instruction.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">In the keys parameter we will pass all accounts we want to send and in data (<span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>instruction_data</code></span> for our program) we want to send, we will pass the programId we want to invoke. Note we have created programId global variable in this file already.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">const</span><span> instructionTOOurProgram </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">TransactionInstruction</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>         keys</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">{</span><span> pubkey</span><span class="token" style="color:#f8f8f2">:</span><span> newAccount</span><span class="token" style="color:#f8f8f2">,</span><span> isSigner</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">false</span><span class="token" style="color:#f8f8f2">,</span><span> isWritable</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">true</span><span> </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">{</span><span> pubkey</span><span class="token" style="color:#f8f8f2">:</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span> isSigner</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">true</span><span class="token" style="color:#f8f8f2">,</span><span> isWritable</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">false</span><span> </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        programId</span><span class="token" style="color:#f8f8f2">:</span><span> programId</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        data</span><span class="token" style="color:#f8f8f2">:</span><span> data_to_send</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we have created the instructions we want. We will pass them to our helper function <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>setPayerAndBlockhashTransaction</code></span> which would create a instance <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>Transaction</code></span> for our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>instructions</code></span> which we can then pass to <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>signAndSendTransaction</code></span>.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">const</span><span> trans </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">setPayerAndBlockhashTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">[</span><span>createProgramAccount</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            instructionTOOurProgram</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">const</span><span> signature </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">signAndSendTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>trans</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now that is done we can confirm our transaction by passing the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>signature</code></span> in <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>confirmTransaction</code></span> function.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">const</span><span> result </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> connection</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">confirmTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>signature</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;end sendMessage&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> result</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we can go ahead and connect this function to our front-end with our Form.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">So in our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>form.js</code></span>, we can have an on submit. On calling this function we will see a sollet dialog. Which would ask us to sign the transaction.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>  </span><span class="token" style="color:#8be9fd">const</span><span> </span><span class="token function-variable" style="color:#f1fa8c">onSubmit</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        e</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">preventDefault</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">createCampaign</span><span class="token" style="color:#f8f8f2">(</span><span>name</span><span class="token" style="color:#f8f8f2">,</span><span> description</span><span class="token" style="color:#f8f8f2">,</span><span> image</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f1fa8c">setRoute</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#bd93f9">0</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span class="token" style="color:#6272a4">// we are updated this to change the ui.</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">See the final <a href="https://github.com/SushantChandla/solana-crowd-funding/blob/main/src/components/Form.js" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD"><span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>form.js</code></span></a> file for reference.
Now we can add campaigns.</div>
<h2 id="fetch-all-campaigns" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">Fetch all Campaigns<a href="#fetch-all-campaigns"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We have implemented a function to add campaigns, but we do not have any function to fetch all the campaigns. Let&#x27;s make that.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We know we have added all the data in program accounts, so we can fetch all the program accounts by using <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>getProgramAccounts</code></span> on connection.
This will return us a list of accounts and their public keys. Now we can deserialize the data of an account by using the borsh package and convert the data into a desirable list and return it.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">export</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#8be9fd">function</span><span> </span><span class="token" style="color:#f1fa8c">getAllCampaigns</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> accounts </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> connection</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">getProgramAccounts</span><span class="token" style="color:#f8f8f2">(</span><span>programId</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> campaigns </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span>    accounts</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">forEach</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#8be9fd">try</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            </span><span class="token" style="color:#8be9fd">let</span><span> campData </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">deserialize</span><span class="token" style="color:#f8f8f2">(</span><span class="token maybe-class-name">CampaignDetails</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">schema</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token maybe-class-name">CampaignDetails</span><span class="token" style="color:#f8f8f2">,</span><span> e</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">account</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">data</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>            campaigns</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">push</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>                pubId</span><span class="token" style="color:#f8f8f2">:</span><span> e</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">pubkey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                name</span><span class="token" style="color:#f8f8f2">:</span><span> campData</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">name</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                description</span><span class="token" style="color:#f8f8f2">:</span><span> campData</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">description</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                image_link</span><span class="token" style="color:#f8f8f2">:</span><span> campData</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">image_link</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                amount_donated</span><span class="token" style="color:#f8f8f2">:</span><span> campData</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">amount_donated</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>                admin</span><span class="token" style="color:#f8f8f2">:</span><span> campData</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">admin</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span> </span><span class="token control-flow" style="color:#8be9fd">catch</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span>err</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span>err</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#8be9fd">return</span><span> campaigns</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Then we can use this in <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>app.js</code></span>, we can render cards with this data. Add this code to <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>app.js</code></span>:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#f1fa8c">useEffect</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">getAllCampaigns</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">val</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>      </span><span class="token" style="color:#f1fa8c">setCards</span><span class="token" style="color:#f8f8f2">(</span><span>val</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>      </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span>val</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>  </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">See the final <a href="https://github.com/SushantChandla/solana-crowd-funding/blob/main/src/App.js" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD"><span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>app.js</code></span></a> file for reference.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><div><a href="https://i.imgur.com/wjFVAaC.gif"><img src="https://i.imgur.com/wjFVAaC.gif" alt="Result" class="Markdownstyles__StyledImage-sc-1iemeff-9 fqEdif"/></a></div></div>
<h2 id="the-donate-function" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">The donate function<a href="#the-donate-function"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">For donating, we will again create an program account and we will fund it with the amount we want to donate. As we discussed while writing our program it is not possible to decrease the balance of an account that is not owned by our program.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Our function will take in the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>campaignPubKey</code></span>, and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>amount</code></span> as parameters.</div>
<ul>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA"><span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>amount</code></span>: the amount of Solana token we want to donate.</li>
<li class="Markdownstyles__StyledListItem-sc-1iemeff-2 dDAwzA"><span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>campaignPubKey</code></span>: public key of the account we want to send tokens to. This is the same account where the data related to this campaign is stored.</li>
</ul>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">export</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#8be9fd">function</span><span> </span><span class="token" style="color:#f1fa8c">donateToCampaign</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    </span><span class="token parameter">campaignPubKey</span><span class="token parameter" style="color:#f8f8f2">,</span><span class="token parameter"> amount</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">checkWallet</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#8be9fd">const</span><span> </span><span class="token" style="color:#ff79c6">SEED</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&quot;abcdef&quot;</span><span> </span><span class="token" style="color:#f8f8f2">+</span><span> </span><span class="token known-class-name" style="color:#f1fa8c">Math</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">random</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">toString</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> newAccount </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token maybe-class-name">PublicKey</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">createWithSeed</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>        wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#ff79c6">SEED</span><span class="token" style="color:#f8f8f2">,</span><span>
</span>        programId
<span>    </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#8be9fd">const</span><span> createProgramAccount </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token maybe-class-name">SystemProgram</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">createAccountWithSeed</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        fromPubkey</span><span class="token" style="color:#f8f8f2">:</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        basePubkey</span><span class="token" style="color:#f8f8f2">:</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        seed</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#ff79c6">SEED</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        newAccountPubkey</span><span class="token" style="color:#f8f8f2">:</span><span> newAccount</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        lamports</span><span class="token" style="color:#f8f8f2">:</span><span> amount</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        space</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        programId</span><span class="token" style="color:#f8f8f2">:</span><span> programId</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">This is similar to <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>createCampaign</code></span> function.
Here I have set the space as <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>1</code></span>, because I want the account to get deleted when its balance becomes zero. And we are setting the initial lamports equal to the number of Solana tokens we want to donate.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Then we will pass 3 keys (Accounts) as our program needs 3 accounts (see <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>donate</code></span> function implementation in the program).</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We are sending data as an array, [2], because we want call the donate function in the program and we have mapped it to the 2 value of the first element in the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>instruction_data</code></span> array.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>   </span><span class="token" style="color:#8be9fd">const</span><span> instructionTOOurProgram </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">TransactionInstruction</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        keys</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">{</span><span> pubkey</span><span class="token" style="color:#f8f8f2">:</span><span> campaignPubKey</span><span class="token" style="color:#f8f8f2">,</span><span> isSigner</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">false</span><span class="token" style="color:#f8f8f2">,</span><span> isWritable</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">true</span><span> </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">{</span><span> pubkey</span><span class="token" style="color:#f8f8f2">:</span><span> newAccount</span><span class="token" style="color:#f8f8f2">,</span><span> isSigner</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">false</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">{</span><span> pubkey</span><span class="token" style="color:#f8f8f2">:</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span> isSigner</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">true</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        programId</span><span class="token" style="color:#f8f8f2">:</span><span> programId</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        data</span><span class="token" style="color:#f8f8f2">:</span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">Uint8Array</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">2</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#8be9fd">const</span><span> trans </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">setPayerAndBlockhashTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">[</span><span>createProgramAccount</span><span class="token" style="color:#f8f8f2">,</span><span> instructionTOOurProgram</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">const</span><span> signature </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">signAndSendTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>trans</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">const</span><span> result </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> connection</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">confirmTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>signature</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;end sendMessage&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> result</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We have created instructions to our program and then called the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>setPayerAndBlockhashTransaction</code></span>, <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>signAndSendTransaction</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>confirmTransaction</code></span> to send and confirm the transaction just like we did in the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>createCampaign</code></span> function.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We can connect this function with the UI. In <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>card.js</code></span>, update the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>onDonate</code></span> function:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>   </span><span class="token" style="color:#8be9fd">const</span><span> </span><span class="token function-variable" style="color:#f1fa8c">onDonate</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        e</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">preventDefault</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">donateToCampaign</span><span class="token" style="color:#f8f8f2">(</span><span>data</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">id</span><span class="token" style="color:#f8f8f2">,</span><span> amount</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">let</span><span> newCards </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">getAllCampaigns</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f1fa8c">setCards</span><span class="token" style="color:#f8f8f2">(</span><span>newCards</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">See the final <a href="https://github.com/SushantChandla/solana-crowd-funding/blob/main/src/components/Card.js" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD"><span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>card.js</code></span></a> file for reference.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO"><div><a href="https://i.imgur.com/0yahyH7.gif"><img src="https://i.imgur.com/0yahyH7.gif" alt="Result" class="Markdownstyles__StyledImage-sc-1iemeff-9 fqEdif"/></a></div></div>
<h2 id="the-withdraw-function" class="Markdownstyles__StyledH2-sc-1iemeff-7 icvCJk">The withdraw function<a href="#the-withdraw-function"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h2>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Now we will write the withdraw function. For withdrawls, we don&#x27;t have to create a program account, and we will only pass one instruction. Since we are using a <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>WithdrawRequest</code></span> struct in our program, we will have to create a class and schema for borsh serialization. Let&#x27;s set that up now:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">class</span><span> </span><span class="token" style="color:#f1fa8c">WithdrawRequest</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token" style="color:#f1fa8c">constructor</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">properties</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token known-class-name" style="color:#f1fa8c">Object</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">keys</span><span class="token" style="color:#f8f8f2">(</span><span>properties</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">forEach</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">key</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            </span><span class="token" style="color:#8be9fd">this</span><span class="token" style="color:#f8f8f2">[</span><span>key</span><span class="token" style="color:#f8f8f2">]</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> properties</span><span class="token" style="color:#f8f8f2">[</span><span>key</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">static</span><span> schema </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">Map</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#f8f8f2">[</span><span class="token maybe-class-name">WithdrawRequest</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            kind</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#50fa7b">&#x27;struct&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            fields</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span>
</span><span>                </span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#50fa7b">&#x27;amount&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#50fa7b">&#x27;u64&#x27;</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">We have created the schema with the amount as <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>u64</code></span> which is the datatype of the variable in Rust. Now let us write the actual function. Our function will take in the parameter <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>campaignPubKey</code></span> and the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>amount</code></span> we want to withdraw. Then we will serialize the data. First, we will create the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>WithdrawRequest</code></span> object, and then with the help of the schema, we have as a static member in <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>WithdrawRequest</code></span> class.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">export</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#8be9fd">function</span><span> </span><span class="token" style="color:#f1fa8c">withdraw</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    </span><span class="token parameter">campaignPubKey</span><span class="token parameter" style="color:#f8f8f2">,</span><span class="token parameter"> amount</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">checkWallet</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span> </span><span class="token" style="color:#8be9fd">let</span><span> withdrawRequest </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">WithdrawRequest</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">{</span><span> amount</span><span class="token" style="color:#f8f8f2">:</span><span> amount </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> data </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">serialize</span><span class="token" style="color:#f8f8f2">(</span><span class="token maybe-class-name">WithdrawRequest</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">schema</span><span class="token" style="color:#f8f8f2">,</span><span> withdrawRequest</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">let</span><span> data_to_send </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">Uint8Array</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">[</span><span class="token" style="color:#bd93f9">1</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token spread" style="color:#f8f8f2">...</span><span>data</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Then we will create the instruction and pass the data. Note that we are inserting <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>1</code></span> in our <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>data_to_send</code></span> before sending.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">const</span><span> instructionTOOurProgram </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">new</span><span> </span><span class="token" style="color:#f1fa8c">TransactionInstruction</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        keys</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">{</span><span> pubkey</span><span class="token" style="color:#f8f8f2">:</span><span> campaignPubKey</span><span class="token" style="color:#f8f8f2">,</span><span> isSigner</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">false</span><span class="token" style="color:#f8f8f2">,</span><span> isWritable</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">true</span><span> </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>            </span><span class="token" style="color:#f8f8f2">{</span><span> pubkey</span><span class="token" style="color:#f8f8f2">:</span><span> wallet</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">publicKey</span><span class="token" style="color:#f8f8f2">,</span><span> isSigner</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#bd93f9">true</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        programId</span><span class="token" style="color:#f8f8f2">:</span><span> programId</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>        data</span><span class="token" style="color:#f8f8f2">:</span><span> data_to_send
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">This part of the code is same as the <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>donate</code></span> and <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>createCampaign</code></span> functions.</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>    </span><span class="token" style="color:#8be9fd">const</span><span> trans </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">setPayerAndBlockhashTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">[</span><span>instructionTOOurProgram</span><span class="token" style="color:#f8f8f2">]</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">const</span><span> signature </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">signAndSendTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>trans</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">const</span><span> result </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> connection</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">confirmTransaction</span><span class="token" style="color:#f8f8f2">(</span><span>signature</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;end sendMessage&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> result</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">Connect the functions with the UI in <span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>card.js</code></span>:</div>
<pre><div sourcePosition="[object Object]" style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.5em 0;overflow:auto;border-radius:0.3em"><code class="language-js" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> </span><span class="token" style="color:#8be9fd">const</span><span> </span><span class="token function-variable" style="color:#f1fa8c">onWithdraw</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#8be9fd">async</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        e</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">preventDefault</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#8be9fd">try</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">withdraw</span><span class="token" style="color:#f8f8f2">(</span><span>data</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">id</span><span class="token" style="color:#f8f8f2">,</span><span> amount</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>            </span><span class="token" style="color:#f1fa8c">alert</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&#x27;Withdraw successful!&#x27;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span> </span><span class="token control-flow" style="color:#8be9fd">catch</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span>e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span>e</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>            </span><span class="token" style="color:#f1fa8c">alert</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&quot;only admin can withdraw&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>        </span><span class="token" style="color:#8be9fd">let</span><span> newCards </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token control-flow" style="color:#8be9fd">await</span><span> </span><span class="token" style="color:#f1fa8c">getAllCampaigns</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f1fa8c">setCards</span><span class="token" style="color:#f8f8f2">(</span><span>newCards</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">See the final <a href="https://github.com/SushantChandla/solana-crowd-funding/blob/main/src/components/Card.js" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD"><span class="ant-typography Textstyles__StyledText-sc-9wtfdj-0 jMJotG"><code>card.js</code></span></a> file.</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">And we&#x27;re done!</div>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">You can see the whole project on <a href="https://github.com/SushantChandla/solana-crowd-funding" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">github</a>.</div>
<h1 id="conclusion" class="Markdownstyles__StyledH1-sc-1iemeff-6 kxtoqK">Conclusion<a href="#conclusion"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h1>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">In this tutorial, you learned how to build a Crowd Funding app on Solana. We covered the on-chain program&#x27;s code using the Rust programming language. We built the User Interface with React.</div>
<h1 id="about-the-author" class="Markdownstyles__StyledH1-sc-1iemeff-6 kxtoqK">About the Author<a href="#about-the-author"><div class="Markdownstyles__LinkIcon-sc-1iemeff-10 hPIzE"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></a></h1>
<div class="ant-typography Paragraphstyles__StyledParagraph-zdv6oi-0 kuIxyO">This tutorial was created by <a href="https://github.com/SushantChandla" target="_blank" rel="noreferrer" class="Markdownstyles__StyledLink-sc-1iemeff-5 dHJlmD">Sushant Chandla</a>.</div><div class="ant-row" style="margin-left:-8px;margin-right:-8px"></div></main></div><div class="ant-col MarkdownContentstyles__StyledToCCol-pis3vj-1 cpHBdb ant-col-xl-8"><div class="MarkdownContentstyles__StyledStickyContainer-pis3vj-3 lkTOom"><div><div></div><div><div class="ant-card Cardstyles__StyledCard-sc-17x2bti-0 hbBBMq"><div class="ant-card-head"><div class="ant-card-head-wrapper"><div class="ant-card-head-title">Table of Contents</div></div></div><div class="ant-card-body"></div></div></div></div></div></div></div></div></div></div></div></div><footer class="ant-layout-footer Footerstyles__StyledFooter-sc-430ded-0 kUFsvc"><div class="Footerstyles__TopContainer-sc-430ded-1 iIFXAi"><div class="Footerstyles__LogoContainer-sc-430ded-2 bbLIkH"><div class="Logostyles__StyledContainer-gwqb60-0 fPixzz"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:44.62962962962963%"></div><noscript><img alt="Figment logo" variant="white" srcSet="/_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=640&amp;q=75 640w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=750&amp;q=75 750w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=828&amp;q=75 828w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2Fimages%2Flogo-main.svg&amp;w=3840&amp;q=75 3840w" src="/images/logo-main.svg" decoding="async" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></noscript><img alt="Figment logo" variant="white" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="ant-row ant-row-center SecondaryNavigationstyles__StyledContainer-sc-177t529-0 cmElNw"><div class="SecondaryNavigationstyles__MenuItem-sc-177t529-1 GPreh"><a href="https://figment.io/" target="_blank" rel="noreferrer" style="color:white;font-weight:600">Figment</a></div><div class="SecondaryNavigationstyles__MenuItem-sc-177t529-1 GPreh"><a href="https://docs.figment.io/terms-and-conditions/terms-of-use" target="_blank" rel="noreferrer">Terms of Use</a></div><div class="SecondaryNavigationstyles__MenuItem-sc-177t529-1 GPreh"><a href="https://docs.figment.io/terms-and-conditions/privacy-policy" target="_blank" rel="noreferrer">Privacy Policy</a></div><div class="SecondaryNavigationstyles__MenuItem-sc-177t529-1 GPreh"><a href="https://bit.ly/figment-learn-contribute" target="_blank" rel="noreferrer">Contributor Terms</a></div></div></div></footer></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"session":null,"initialApolloState":{"Protocol:2613e4e6-4bfa-46a3-9c16-f9954f078811":{"id":"2613e4e6-4bfa-46a3-9c16-f9954f078811","__typename":"Protocol","name":"Solana","slug":"solana"},"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078823":{"id":"2213e4e6-4bfa-46a3-9c16-f9954f078823","__typename":"Tag","name":"JS/TS"},"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e5":{"id":"1213e4e6-4bfa-46a3-9c16-f9954f0788e5","__typename":"TagGroup","name":"Programming Language"},"Tagging:4663f4af-69a4-409d-b3ac-4f7c985d8692":{"id":"4663f4af-69a4-409d-b3ac-4f7c985d8692","__typename":"Tagging","tagGroupId":"1213e4e6-4bfa-46a3-9c16-f9954f0788e5","tagId":"2213e4e6-4bfa-46a3-9c16-f9954f078823","tag":{"__ref":"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078823"},"tagGroup":{"__ref":"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e5"}},"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078826":{"id":"2213e4e6-4bfa-46a3-9c16-f9954f078826","__typename":"Tag","name":"Rust"},"Tagging:a7d7e151-7960-4f1c-a9cc-ac876b34d5bb":{"id":"a7d7e151-7960-4f1c-a9cc-ac876b34d5bb","__typename":"Tagging","tagGroupId":"1213e4e6-4bfa-46a3-9c16-f9954f0788e5","tagId":"2213e4e6-4bfa-46a3-9c16-f9954f078826","tag":{"__ref":"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078826"},"tagGroup":{"__ref":"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e5"}},"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078835":{"id":"2213e4e6-4bfa-46a3-9c16-f9954f078835","__typename":"Tag","name":"React"},"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e7":{"id":"1213e4e6-4bfa-46a3-9c16-f9954f0788e7","__typename":"TagGroup","name":"Technology"},"Tagging:4a6940cb-e7ed-4be0-9214-fd237ed67fe4":{"id":"4a6940cb-e7ed-4be0-9214-fd237ed67fe4","__typename":"Tagging","tagGroupId":"1213e4e6-4bfa-46a3-9c16-f9954f0788e7","tagId":"2213e4e6-4bfa-46a3-9c16-f9954f078835","tag":{"__ref":"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078835"},"tagGroup":{"__ref":"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e7"}},"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078843":{"id":"2213e4e6-4bfa-46a3-9c16-f9954f078843","__typename":"Tag","name":"Javascript"},"Tagging:46ad97fa-3f7c-42aa-b78f-1414831d2a54":{"id":"46ad97fa-3f7c-42aa-b78f-1414831d2a54","__typename":"Tagging","tagGroupId":"1213e4e6-4bfa-46a3-9c16-f9954f0788e7","tagId":"2213e4e6-4bfa-46a3-9c16-f9954f078843","tag":{"__ref":"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078843"},"tagGroup":{"__ref":"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e7"}},"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078844":{"id":"2213e4e6-4bfa-46a3-9c16-f9954f078844","__typename":"Tag","name":"Rust"},"Tagging:a277735c-88e7-4807-a2dd-b5f9dc91fbad":{"id":"a277735c-88e7-4807-a2dd-b5f9dc91fbad","__typename":"Tagging","tagGroupId":"1213e4e6-4bfa-46a3-9c16-f9954f0788e7","tagId":"2213e4e6-4bfa-46a3-9c16-f9954f078844","tag":{"__ref":"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078844"},"tagGroup":{"__ref":"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e7"}},"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078814":{"id":"2213e4e6-4bfa-46a3-9c16-f9954f078814","__typename":"Tag","name":"1.5 hours"},"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e3":{"id":"1213e4e6-4bfa-46a3-9c16-f9954f0788e3","__typename":"TagGroup","name":"Time Commitment"},"Tagging:90ca772b-70c3-4d43-8d7b-69d949bc431c":{"id":"90ca772b-70c3-4d43-8d7b-69d949bc431c","__typename":"Tagging","tagGroupId":"1213e4e6-4bfa-46a3-9c16-f9954f0788e3","tagId":"2213e4e6-4bfa-46a3-9c16-f9954f078814","tag":{"__ref":"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078814"},"tagGroup":{"__ref":"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e3"}},"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078817":{"id":"2213e4e6-4bfa-46a3-9c16-f9954f078817","__typename":"Tag","name":"Intermediate"},"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e4":{"id":"1213e4e6-4bfa-46a3-9c16-f9954f0788e4","__typename":"TagGroup","name":"Difficulty"},"Tagging:a639322e-68d1-4357-b0d1-7694d1a3a2e0":{"id":"a639322e-68d1-4357-b0d1-7694d1a3a2e0","__typename":"Tagging","tagGroupId":"1213e4e6-4bfa-46a3-9c16-f9954f0788e4","tagId":"2213e4e6-4bfa-46a3-9c16-f9954f078817","tag":{"__ref":"Tag:2213e4e6-4bfa-46a3-9c16-f9954f078817"},"tagGroup":{"__ref":"TagGroup:1213e4e6-4bfa-46a3-9c16-f9954f0788e4"}},"Tutorial:0a05b21c-7bf8-4833-8c95-7aa15025f73c":{"id":"0a05b21c-7bf8-4833-8c95-7aa15025f73c","__typename":"Tutorial","title":"Build a Crowdfunding platform on Solana","slug":"build-a-crowdfunding-platform-on-solana","position":0,"description":"Learn how to create and deploy a Crowdfunding dApp on Solana","markdownUrl":"https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/solana/solana-crowdfund-tutorial.md","author":"Sushant Chandla","authorUrl":"https://github.com/SushantChandla","originalUrl":null,"timeToComplete":null,"featured":false,"body":"# Introduction\n\nWe are going to make a CrowdFunding platform like GoFundMe, Kickstarter, and Indiegogo. Our DApp will let people create campaings, Donate SOL to existing campaings and payout to the compaign creator. \nWe are going to make a Solana program and connect it with our front-end application.\n\n\n# Prerequisites\n\n- React\n- Javascript\n\n# Requirements\n\nThe following software is required to complete this tutorial:\n- Git, install it from [HERE](https://git-scm.com/downloads).\n- Solana CLI, install it from [HERE](https://docs.solana.com/cli/install-solana-cli-tools#use-solanas-install-tool).\n- The Rust toolchain, install it from [HERE](https://www.rust-lang.org/tools/install).\n- Node.js (v14.18.1+), install it from [HERE](https://nodejs.org/en/download/).\n\n\n\n\u003e If you already have good knowledge of the Rust programming language, you can skip the `Introduction to Rust` section. I would still recommend having a quick look at all the code blocks.\n\n\n# Introduction to Rust\n\nRust is a multi-paradigm, high-level, general-purpose programming language designed for performance and safety, especially safe concurrency.\n\nRust code uses snake case as the conventional style for function and variable names.\n\n## Installing Rust on your system\n\nYou can follow this this [link](https://doc.rust-lang.org/book/ch01-01-installation.html) for your operating system.\n\u003e **Note**: If you are using Visual Studio Code (VSCode) you should install the extension `matklad.rust-analyzer`. I have found it to work better than `Rust-lang.rust` for code analysis, auto-completion and snippets.\n\nBefore we start the tutorial, we need to understand some basics of Rust. I have added the link to the [Rust book](https://doc.rust-lang.org/book/ch00-00-introduction.html) pages if you want to read more about any topic.\n\n## Basics Data types in Rust\nRust has four primary scalar types: integers, floating-point numbers, Booleans, and characters.\nIntegers are `u8`,`u32`, `i32`, `i64`, `usize`, and the list goes on here basically `u` prefix suggests that we have an unsigned integer and the suffix number tell the number of bits. So `u8` is an unsigned 8-bit number(0 to 255).\n|Length| Signed|\tUnsigned|\n|------- |-------|-------|\n|8-bit|\ti8|\tu8|\n|16-bit|\ti16|\tu16|\n|32-bit|\ti32\t|u32|\n|64-bit|\ti64|\tu64|\n|128-bit\t|i128|\tu128|\n|arch|\tisize|\tusize|\n\nWe have `f32` and `f64` for floating-point numbers. `bool` for booleans, and `char` for characters.\nRust has 2 types for strings, `str` and `String`. `String` is a growable, heap-allocated data structure. `str` is an immutable fixed-length string somewhere in memory.\n\nRead more on [Rust book](https://doc.rust-lang.org/book/ch03-02-data-types.html).\n\n## Creating a variable and mutability\n\nWe can create a variable with the `let` keyword\n\n```rust\n// The compiler identifies the Rvalue as i32, so it sets the type of variable to i32\nlet a=0;\n```\n\nwe can also set the data type for a variable, eg.\n\n```rust\nlet a :u8 = 0;\n```\n\nIn Rust, all the variables are immutable by default. Which means their value can not be changed once set.\nAnd here comes the `mut` keyword. We can initialize the variable with `let mut` to have a mutable variable. eg.\n\n```rust\n// This program will compile\nlet mut a = 0;\na=a+1;\na=100;\n```\n\nRead more on [Rust book](https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html).\n\n## Control flow\n\nWe can use `if` `else` statement in Rust just like we can do in other language, here is a small program for us to understand the syntax.\n\n```rust\nfn main(){\n    let a=99;\n    if a%2==0{\n        println!(\"Even\");\n    }\n    else{\n        println!(\"Odd\");\n    }\n}\n```\n\nWe also have loops in Rust. We can create a loop with 3 keywords `loop`, `for`, and `while`. Since `for` is most common. Here is an example of it. You can checkout example for `loop` and `while` [here](https://doc.rust-lang.org/book/ch03-05-control-flow.html#repeating-code-with-loop).\n\n```rust\nfn main() {\n    for i in 0..7 { // 0..7 is range expression including 0 excluding 7.\n        println!(\"variable `i` is : {}\", i);\n    }\n}\n```\n\nRead more on [Rust book](https://doc.rust-lang.org/book/ch03-05-control-flow.html).\n\n\n## Functions and Macros\n\nFunction definitions in Rust start with fn and have a set of parentheses after the function name. The curly brackets tell the compiler where the function body begins and ends.\n\n```rust\nfn main() {\n    another_function(5);\n    another_function_with_x_and_y(1,2);\n}\n\nfn another_function(x: i32) {// input paramter and type\n    println!(\"The value of x is: {}\", x);\n}\nfn another_function_with_x_and_y(x: i32,y:i32) {\n    println!(\"The value of x is: {} {}\", x, y);\n}\n```\n\nFor this tutorial, we can assume macros are also functions. They end with `!`, like `println!` macro, `format!` macro, and `msg!` macro.\n\nRead more about functions on [Rust book](https://doc.rust-lang.org/book/ch03-03-how-functions-work.html).\n\n## Enums and the match syntax\nRust has enums. They are more than simple enums other languages provide. In Rust, we can even store data in the enums.\nHere is the example of `Result enum`. \nWe are going to make use of the `Result` enum in our program.\n\n```rust\n// Here the pub keyword means it is public.\n// We have used generics T and E for data and error type\npub enum Result\u003cT, E\u003e { \n    Ok(T), \n    Err(E),\n}\n```\n\nRead more about enums on [rust book](https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html). \n\nHere is an enum and match example with an explanation of each line:\n\n```rust\nenum Coin {\n    Penny,\n    Nickel,\n    Dime,\n    Custom(i32),\n}\n// Creating a coin enums\n// notice how some values have no parameter\n// and how we can have an i32 value stored in `Custom`\n\nlet coin=Coin::Custom(30);\nlet coin2 =Coin::Nickel;\n// We can create instances like this\n\nlet a = match coin {\n        Coin::Penny =\u003e 1,\n        Coin::Nickel =\u003e 5,\n        Coin::Dime =\u003e 10,\n        Coin::Custom(e) =\u003e e,\n    };\n// We can use the match syntax to know what type of coin we have  \n// and set a corresponding value to the variable `a`.\n\nassert_eq!(a,30);\n// In this case a will be equal to 30 because coin is Custom with value 30.\n```\n\nRead more about match syntax in the [Rust book](https://doc.Rust-lang.org/book/ch06-02-match.html).\n\n## Cargo and Borsh\nCargo is the Rust package manager. We use it to build our program and get dependencies. It also makes adding packages(crates) very easy. Read more about Cargo  in the [Rust book](https://doc.Rust-lang.org/book/ch01-03-hello-cargo.html)\n\nBorsh stands for Binary Object Representation Serializer for Hashing. It is meant to be used in security-critical projects as it prioritizes consistency, safety, speed, and comes with a strict specification. \nWe are using it for data serialization and deserialization. Read more about the carte on [crates.io](https://crates.io/crates/borsh).\n\nThis is all the Rust we would need to get started with our Solana program.\n\n# Solana program\n\n## Setup\n\n1. We create a React app. Open your projects directory in the terminal and run\n\n```text\nnpx create-react-app crowd-funding\n``` \n\nThis creates a React app for us.\n\n2. Now, we will create our program.\nIn your projects directory.\n\n```text\ncd crowd-funding\ncargo new program --lib\n```\n\nThis will create a new directory called `program`, which is a new Rust project generated by cargo.\n\n3. We will discuss the front-end side of the project later. Now we can open the `program` folder in VSCode.\n\n\n4. Create  `Xargo.toml` in the program directory.\nIn your `Xargo.toml`\n\n```toml\n[target.bpfel-unknown-unknown.dependencies.std]\nfeatures = []\n```\n\n5. Update your `Cargo.toml`\n\n```toml\n[package]\nname = \"program\"\nversion = \"0.1.0\"\nedition = \"2018\"\n\n[dependencies]\nsolana-program = \"1.7.14\"\nborsh = \"0.9.1\"\nborsh-derive = \"0.9.1\"\n\n[features]\nno-entrypoint = []\n\n[dev-dependencies]\nsolana-program-test = \"1.7.14\"\nsolana-sdk = \"1.7.14\"\n\n[lib]\ncrate-type = [\"cdylib\", \"lib\"]\n```\n\nWe have added all the dependencies we are going to need for our program. Run `cargo check` to get all the dependencies. We can now start working in `src/lib.rs` and start coding our program for the Solana blockchain.\n\n## What do we want in our program?\n\nBefore we start writing the code, let us discuss what entry points our crowdfunding app should have.\n- Create a Crowdfunding Campaign.\nWe would need an entry point that anyone can use to create a crowdfunding campaign on our platform. We can have a name, description, and admin fields for it.\n\n- Withdraw from the Campaign.\nWe would need an entry point for campaign administrators only, so they can withdraw funds.\n\n- Donate to a Campaign.\nWe would need an entry point that can be invoked by anyone to donate to a specific Campaign.\n\nThese are all the entry points we are going to need for our project. Let us discuss how we will be creating these.\n\n\n## Where can we store data?\n\nBefore we start we have to understand Solana programs don't have storage(`contract storage` you might be familiar with). Then how and where should we store our data.\n\n**Program accounts**\nIn Solana, data can only be stored in accounts. So we can create program-owned accounts to save the data.\n\u003e Note: The total number of bytes of data an account can have is fixed when we create an account.\n\nOne way to deal with this is to create an Account with very large storage. However if we do that, the maximum data limit for an account is 10 megabytes. If we have enough users, we would eventually run out of storage space. We must think of a way to increase the amount of storage we can use.\n\nWe can create as many program-owned accounts as we want, so the idea here is that we will have a size limit for every element in our map. And whenever we want to add a new element we will create a new program-owned account. Program-owned accounts are also called PDA(program-derived accounts).\n\n## Coding the program\nNow that we have discussed what we want to create. Let start coding.\nGo ahead and open up the `program` folder in VSCode or your favorite IDE.\nFile structure in the `program` directory should look like this.\n![file structure](https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-program-files.png?raw=true)\n\nGo ahead and open up the `lib.rs` file in your code editor, and let us add some boilerplate code first.\n\nYou can see the completed code on [github](https://github.com/SushantChandla/solana-crowd-funding/blob/main/program/src/lib.rs).\n\n\n\u003e Note: In Rust, we can pass variables as a reference with `\u0026` and get the value of a reference with `*` Operator.\n\n```rust \n// First we include what we are going to need in our program. \n// This  is the Rust style of importing things.\n// Remember we added the dependencies in cargo.toml\n// And from the `solana_program` crate we are including  all the required things.\nuse solana_program::{\n    account_info::{next_account_info, AccountInfo},\n    entrypoint,\n    entrypoint::ProgramResult,\n    msg,\n    program_error::ProgramError,\n    pubkey::Pubkey,\n    rent::Rent,\n    sysvar::Sysvar,\n};\n\n\n// Every solana program has one entry point\n// And it is a convention to name it `process_instruction`. \n// It should take in program_id, accounts, instruction_data as parameters.\nfn process_instruction(\n    // program id is nothing but the id of this program on the solana network.\n    program_id: \u0026Pubkey,\n    // When we invoke our program we can \n    // give meta data of all the account we \n    // want to work with.\n    // As you can see it is a array of AccountInfo.\n    // We can provide as many as we want.\n    accounts: \u0026[AccountInfo],\n    // This is the data we want to process our instruction for.\n    // It is a list of 8 bitunsigned integers(0..255).\n    instruction_data: \u0026[u8],\n    \n    // Here we specify the return type.\n    // If you know a little bit of typescript. \n    // This was of writing types and returns types might we familiar to you.\n) -\u003e ProgramResult {\n    \n    // And then since we can't return null in Rust we pass `Ok(())` to make it compile\n    // It means the program executed successfully.\n    Ok(())\n}\n\n\n// Then we call the entry point macro to add `process_instruction` as our entry point to our program.\nentrypoint!(process_instruction);\n```\n\n\u003e Note: In Rust, if the last line doesn't end with `;` means our function is return-ing that.\nHere the line `Ok(())` is equivalent to `return Ok(());` \n\nIn the code, I have mentioned there is only one entry point in the Solana program.\nBut we want three as we discussed in the \"What do we want in our program?\" section. Let's fix this issue.\nHave you noticed there is no limit to the instruction_data array? We are going to take advantage of that fact. We use the first element of the array to know what entry point we want to call.\nNotice we can have 256 entry points like this in a single program (`u8` has a value of 0..255). Realistically we never do that if in case we want that many entry points for a project. It is better to deploy more programs.\n\nOkay, let's do more coding...\n\n```rust\nfn process_instruction(\n    program_id: \u0026Pubkey,\n    accounts: \u0026[AccountInfo],\n    instruction_data: \u0026[u8],\n) -\u003e ProgramResult {\n    // We check if We have a instruction_data len greater than 0 if it is not we do not want to procced.\n    // So we return Error with InvalidInstructionData message.\n     if instruction_data.len() == 0 {\n        return Err(ProgramError::InvalidInstructionData);\n    }\n    /// Now we just check and call the function for each of them.\n    // I have choosen 0 for create_campaign,\n    // 1 for withdraw\n    // 2 for donate.\n    if instruction_data[0] == 0 {\n        return create_campaign(\n            program_id,\n            accounts,\n            /// Notice we pass program_id and accounts as they where \n            // but we pass a reference to slice of [instruction_data]. \n            /// we do not want the first element in any of our functions.\n            \u0026instruction_data[1..instruction_data.len()],\n        );\n    } else if instruction_data[0] == 1 {\n        return withdraw(\n            program_id,\n            accounts,\n            \u0026instruction_data[1..instruction_data.len()],\n        );\n    } else if instruction_data[0] == 2 {\n        return donate(\n            program_id,\n            accounts,\n            \u0026instruction_data[1..instruction_data.len()],\n        );\n    }\n\n    /// If instruction_data doesn't match we give an error.\n    // Note I have used msg!() macro and passed a string here. \n    // It is good to do this as this would \n    // also get printed in the console window\n    // if a program fails.\n    msg!(\"Didn't find the entrypoint required\");\n    Err(ProgramError::InvalidInstructionData)\n}\n\nentrypoint!(process_instruction);\n\n\n/// Here, I have created the function for every action we want to do in our program.\n/// They take in the same parameters as process_intruction and also have the same return type.\n\nfn create_campaign(\n    program_id: \u0026Pubkey,\n    accounts: \u0026[AccountInfo],\n    instruction_data: \u0026[u8],\n) -\u003e ProgramResult {\n    Ok(())\n}\n\nfn withdraw(\n    program_id: \u0026Pubkey,\n    accounts: \u0026[AccountInfo],\n    instruction_data: \u0026[u8],\n) -\u003e ProgramResult {\n    Ok(())\n}\n\nfn donate(\n    program_id: \u0026Pubkey, \n    accounts: \u0026[AccountInfo], \n    _instruction_data: \u0026[u8]\n) -\u003e ProgramResult {\n    Ok(())\n}\n```\n\n## CampaignDetails struct\n\nWe will create a struct in Rust. We have not discussed structs above so, I will explain them here. In Rust, we do not have class. If we want to store more than 1 variable (group variables) we create a struct.\n\n```rust\n/// For an example, let us create human struct.\n#[derive(Debug)]\nstruct Human {\n    /// we can add all the fields in our struct here.\n    /// we also have to specify the type of each variable.\n    /// Like the [eyes_color] here is a `String` type object.\n    pub eyes_color: String,\n    pub name: String,\n    pub height: i32,\n}\n```\n\nNow you must be wondering what is the meaning of `#[derive(Debug)]`. It is interesting to note that we can derive some traits for our struct.\n\n[Traits](https://doc.rust-lang.org/rust-by-example/trait.html) :  A trait in Rust is a group of methods that are defined for a particular type.\n\nNow let's code our `CampaignDetails` struct.\nI have added the fields name, admin, description, image_link,amount_donated for our Campaign.\n\n```rust\n#[derive(BorshSerialize, BorshDeserialize, Debug)]\nstruct CampaignDetails {\n    pub admin: Pubkey,\n    pub name: String,\n    pub description: String,\n    pub image_link: String,\n    /// we will be using this to know the total amount \n    /// donated to a campaign.\n    pub amount_donated: u64,\n}\n```\n\nWe need to derive both BorshSerialize and BorshDeserialize. BorshSerialize is used to convert the struct into an **array of u8**, which is the data we can store in Solana accounts. It is also the data we have in `instruction_data` so we can deserialize that to a struct with the help of `BorshDeserialize`.\n\n\n**Code**: \nAt the top of the file import `BorshSerialize` and `BorshDeserialize` from the `Borsh` Crate.\n\n```rust\nuse borsh::{BorshDeserialize, BorshSerialize};\n```\n\nNow let's add the code of our `create_campaign` function and the `CampaignDetails` Struct.\nI have added an explanation to each line in the code.\n\n```rust \nentrypoint!(process_instruction);\n\n/// We are creating the struct;.\n#[derive(BorshSerialize, BorshDeserialize, Debug)]\nstruct CampaignDetails {\n    pub admin: Pubkey,\n    pub name: String,\n    pub description: String,\n    pub image_link: String,\n    pub amount_donated: u64,\n}\n// All the fields are public, which means we can use the `.`  Operator to get/set the values of the fields.\n\nfn create_campaign(\n    program_id: \u0026Pubkey,\n    accounts: \u0026[AccountInfo],\n    instruction_data: \u0026[u8],\n) -\u003e ProgramResult {\n\n    /// We create a iterator on accounts\n    /// accounts parameter is the array of accounts related to this entrypoint\n    let accounts_iter = \u0026mut accounts.iter();\n```\n\n We can use the `next_account_info` function to get an account from the array. This function returns a result enum. We can use `?` Operator on the result enum to get the value. If in case of an error the `?` Operator will chain the error, and our program will return the same error which was returned by next_account_info.\n\n\n Solana programs can only write data on a program-owned account. Note that writing_account is a program-owned account.\n\n```rust   \n    /// Writing account or we can call it program account.\n    /// This is an account we will create in our front-end.\n    /// This account should br owned by the solana program.\n    let writing_account = next_account_info(accounts_iter)?;\n\n    /// Account of the person creating the campaign.\n    let creator_account = next_account_info(accounts_iter)?;\n\n    // Now to allow transactions we want the creator account to sign the transaction.\n    if !creator_account.is_signer {\n        msg!(\"creator_account should be signer\");\n        return Err(ProgramError::IncorrectProgramId);\n    }\n    /// We want to write in this account so we want its owner by the program.\n    if writing_account.owner != program_id {\n        msg!(\"writing_account isn't owned by program\");\n        return Err(ProgramError::IncorrectProgramId);\n    }\n```\n\nBy deriving the trait `BorshDeserialize` in our `CampaignDetails` struct we have added a method `try_from_slice` which takes in the parameter array of u8 and creates an object of CampaignDetails with it.\nIt gives us an enum of type results. We will use the `expect` method on result enums to and pass in the string which we can see in case of error.\n\n```rust\n    let mut input_data = CampaignDetails::try_from_slice(\u0026instruction_data)\n        .expect(\"Instruction data serialization didn't worked\");\n\n    // Now I want that for a campaign created the only admin should be the one who created it.\n    // You can add additional logical here to check things like\n    // The image url should not be null\n    // The name shouldn't be smaller than some specific length...\n    if input_data.admin != *creator_account.key {\n        msg!(\"Invaild instruction data\");\n        return Err(ProgramError::InvalidInstructionData);\n    }\n```\n\nSolana accounts can have data, but size has to be specified when it is created.  We need to have a minimum balance to make it rent exempt. For this project, we create an account that already has a balance equal to the minimum balance.\nYou can read more about solana account and rent exemption [here](https://docs.solana.com/developing/programming-model/accounts#rent-exemption).\n\n```rust\n    /// get the minimum balance we need in our program account.\n    let rent_exemption = Rent::get()?.minimum_balance(writing_account.data_len());\n    /// And we make sure our program account (`writing_account`) has that much lamports(balance).\n    if **writing_account.lamports.borrow() \u003c rent_exemption {\n        msg!(\"The balance of writing_account should be more then rent_exemption\");\n        return Err(ProgramError::InsufficientFunds);\n    }\n    // Then we can set the initial amount donate to be zero.\n    input_data.amount_donated=0;\n```\n\nIf all goes well, we will write the `writing_account`. Here on our `input_data` variable (of type `CampaignDetails`), we have a method serialize. this is because of the `BorshSerialize` derivation. We will use this to write the data in a `writing_account`. At the end of the program, we can return `Ok(())`.\n\n\n```rust\n    input_data.serialize(\u0026mut \u0026mut writing_account.data.borrow_mut()[..])?;\n\n    Ok(())\n}\n```\n\n\nHurry! We are done with the first `create_campaign` function.\nLet's continue writing the contract and write the withdraw function next.\n\n## Withdraw function implementation.\nFor the withdraw function also, we create a struct to get the input data. In this case, input data is only the amount we want to withdraw.\n\n```rust\n#[derive(BorshSerialize, BorshDeserialize, Debug)]\nstruct WithdrawRequest {\n    pub amount: u64,\n}\n```\n\nNow let us write the function.\n\n```rust\nfn withdraw(\n    program_id: \u0026Pubkey,\n    accounts: \u0026[AccountInfo],\n    instruction_data: \u0026[u8],\n) -\u003e ProgramResult {\n```\n\nFor the withdraw also we will create iterator and get `writing_account` (which is the program owned account) and `admin_account`.\n\n```rust\n    let accounts_iter = \u0026mut accounts.iter();\n    let writing_account = next_account_info(accounts_iter)?;\n    let admin_account = next_account_info(accounts_iter)?;\n    \n    // We check if the writing account is owned by program.\n    if writing_account.owner != program_id {\n        msg!(\"writing_account isn't owned by program\");\n        return Err(ProgramError::IncorrectProgramId);\n    }\n    // Admin account should be the signer in this trasaction.\n    if !admin_account.is_signer {\n        msg!(\"admin should be signer\");\n        return Err(ProgramError::IncorrectProgramId);\n    }\n```\n\nNow we will get the data of campaign from the `writing_account`. Note that we stored this when we created the campaign with `create_campaign` function.\n\u003e Note: We are currently thinking of a scenario where a campaign is created and we want to withdraw some money from it.\n\n```rust\n    // Just like we used the try_from_slice for \n    // instruction_data we will use it for the \n    // writing_account's data.\n    let campaign_data = CampaignDetails::try_from_slice(*writing_account.data.borrow())\n        .expect(\"Error deserializing data\");\n\n    // Then we check if the admin_account's public key is equal to\n    // the public key we have stored in our campaign_data.\n    if campaign_data.admin != *admin_account.key {\n        msg!(\"Only the account admin can withdraw\");\n        return Err(ProgramError::InvalidAccountData);\n    }\n\n\n    // Here we make use of the struct we created.\n    // We will get the amount of lamports admin wants to withdraw\n    let input_data = WithdrawRequest::try_from_slice(\u0026instruction_data)\n        .expect(\"Instruction data serialization didn't worked\");\n```\n\nWe do not want the campaign to get deleted after a withdrawal. We want it to always have a minimum balance, So we calculate the `rent_exemption` and consider it.\n\n```rust\n    let rent_exemption = Rent::get()?.minimum_balance(writing_account.data_len());\n\n    /// We check if we have enough funds\n    if **writing_account.lamports.borrow() - rent_exemption \u003c input_data.amount {\n        msg!(\"Insufficent balance\");\n        return Err(ProgramError::InsufficientFunds);\n    }\n\n    /// Transfer balance\n    /// We will decrease the balance of the program account, and increase the admin_account balance.\n    **writing_account.try_borrow_mut_lamports()? -= input_data.amount;\n    **admin_account.try_borrow_mut_lamports()? += input_data.amount;\n    Ok(())\n}\n```\n\n\u003e Note: We can only decrease the balance of a program-owned account.\n\n## Donate to a campaign\nWe want to donate to a campaign, however we can't decrease the balance of an account not owned by our program in our program. This means we can't just transfer the balance as we did in the withdraw function.\n[Solana policies](https://docs.solana.com/developing/programming-model/runtime#policy) state: \"An account not assigned to the program cannot have its balance decrease.\"\n\nSo for this, we will create a program-owned account in our front-end and then perform the SOL token transaction.\n\n```rust\nfn donate(\n    program_id: \u0026Pubkey,\n    accounts: \u0026[AccountInfo],\n    _instruction_data: \u0026[u8],\n) -\u003e ProgramResult {\n    let accounts_iter = \u0026mut accounts.iter();\n    let writing_account = next_account_info(accounts_iter)?;\n    let donator_program_account = next_account_info(accounts_iter)?;\n    let donator = next_account_info(accounts_iter)?;\n```\n\nWe get 3 accounts here, first is the program-owned account containing the data of campaign we want to donate to.\nThen we have a `donator_program_account` which is also the program-owned account that only has the Lamport we would like to donate.\nThen we have the account of the `donator`.\n\n\u003e Note: When we will create it in our front-end, although we do not want to store anything in it we will assign it some size. That is so it gets automatically deleted after the SOL token has been transferred. Then we want the donator account to sign this transaction.\n\n```rust\n  if writing_account.owner != program_id {\n        msg!(\"writing_account isn't owned by program\");\n        return Err(ProgramError::IncorrectProgramId);\n    }\n    if donator_program_account.owner != program_id {\n        msg!(\"donator_program_account isn't owned by program\");\n        return Err(ProgramError::IncorrectProgramId);\n    }\n    if !donator.is_signer {\n        msg!(\"donator should be signer\");\n        return Err(ProgramError::IncorrectProgramId);\n    }\n```\n\nHere we get the `campaign_data` and we will increment the `amount_donated`, as the total amount of data donated to this campaign will increase.\n\n```rust\n let mut campaign_data = CampaignDetails::try_from_slice(*writing_account.data.borrow())\n        .expect(\"Error deserializing data\");\n\n    campaign_data.amount_donated += **donator_program_account.lamports.borrow();\n```\n\nThen we do the actual transaction. Note that the `donator_program_account` is owned by program so it can decrease its Lamports.\n\n```rust\n **writing_account.try_borrow_mut_lamports()? += **donator_program_account.lamports.borrow();\n **donator_program_account.try_borrow_mut_lamports()? = 0;\n```\n\nThen at the end of the program we will write the new updated `campaign_data` to the `writing_account`'s data field and return the result `Ok(())`.\n\n```rust\n    campaign_data.serialize(\u0026mut \u0026mut writing_account.data.borrow_mut()[..])?;\n\n    Ok(())\n}\n``` \n\nHooray, We have completed our Solana program, Now we can go ahead and deploy it.\n\n## Deploy Solana program.\nWe are going to deploy the program on Devnet.\n\nSolana Programs work on a [BPF system](https://docs.solana.com/developing/on-chain-programs/overview#berkeley-packet-filter-bpf), so we will compile our program into a compatible format.\n\nWe can use the handy package manager cargo to do this:\n\n```text\ncargo build-bpf --manifest-path=Cargo.toml --bpf-out-dir=dist/program\n```\n\nWe can use this command to create a build. In this command, the manifest-path should be the path of your `Cargo.toml` file.\nThis will output the compiled program in Shared Object format (.so) in the `dist/program` directory.\n\n\u003e If you run this command in the `program` directory, you will see the `dist/program` directory is created automatically if it does not already exist.\n\n![program_complied-bpf](https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-program-complied-bpf.png?raw=true)\n\nNow that we have compiled our program we can deploy it. \n\nYou will need the [Solana CLI](https://docs.solana.com/cli/install-solana-cli-tools#use-solanas-install-tool) installed.\n\nWe will create a new Solana account to deploy the program. Run the following command:\n\n```text\nsolana-keygen new -o keypair.json\n```\n\nThe command will prompt you for a passphrase to secure the recovery seed phrase:\n\n```text\nGenerating a new keypair\n\nFor added security, enter a BIP39 passphrase\n\nNOTE! This passphrase improves security of the recovery seed phrase NOT the\nkeypair file itself, which is stored as insecure plain text\n\nBIP39 Passphrase (empty for none):\n```\n\nYou can choose a passphrase or leave it empty. Continuing will provide both the public key of the account and the seed phrase used to create the private key:\n\n```text\nWrote new keypair to keypair.json\n=====================================================================\npubkey: 7WQDnydTTtyb2DsTuuFpeu2bDxQdpZMRc4R6qja1UzP\n=====================================================================\nSave this seed phrase and your BIP39 passphrase to recover your new keypair:\nlemon avoid all erase chair acid fire govern glue outside wheel clock\n=====================================================================\n```\n\nOnce complete you will have the `keypair.json` file, containing the private and public key of a new Solana account. It is important to keep your keypair safe. Do not commit this file to a remote code repository. It is best to add this file to a `.gitignore` to prevent this from happening.\n\nNow we are going to request an airdrop of SOL tokens on the Solana Devnet. This command will add 1 SOL token to the account:\n\n```text\nsolana airdrop 1 \u003cYourPublicKey\u003e --url https://api.devnet.solana.com \n```\n\nExample\n\n```text\nsolana airdrop 1 7WQDnydTTtyb2DsTuuFpeu2bDxQdpZMRc4R6qja1UzP --url https://api.devnet.solana.com \n```\n\n\u003e If you are getting an error: \"**RPC request error**: cluster version query failed: error sending request for url (https://api.devnet.solana.com/): error trying to connect: dns error: failed to lookup address information: nodename nor servname provided, or not known.\" - Please consider switching your primary DNS server over to one of Google, DNSWatch, OpenDNS, SAFEDNS, Dyn, Yandex, AdGuard, or Cloudflare.\n\nIf you get **insufficient balance** while deploying, you can re-run the command to airdrop funds on Devnet.\n\nNow we will use the following command to deploy. Note that the path of `keypair.json` and `dist/program/program.so` might be different in your case. Please check and then run the command.\n\n```text\nsolana deploy --keypair keypair.json dist/program/program.so --url https://api.devnet.solana.com \n```\n\nHooray! we have deployed our program.\nWe will get the program id as output.\n\n```text\nProgram Id: 286rapsUbvDe1ZgBeNhp37YHvEPwWPTr4Bkce4oMpUKT\n```\n\nWe can verify this by checking on the [Solana Explorer for Devnet.](https://explorer.solana.com/?cluster=devnet). \nWe can search our program id here.\n\nHooray! We have completed everything to do with Rust for this tutorial and successfully deployed our program. Now, let us move forward and build the React app.\n\n# Front-end with Solana web3.js\nWe have created a React app, so we can open the `crowd-funding` directory in our code editor.\nThis is not a React tutorial, so we will not go into the details of React. But I will be explaining what we are going to do.\n\nLet's first clean our project. We will remove `setupTests.js`, `reportWebVitals.js`, `logo.svg` and `app.test.js`. Also remove the usage of `reportWebVitals.js` in index.js. Now the project should look like:\n\n![front-end-project](https://raw.githubusercontent.com/figment-networks/learn-tutorials/master/assets/solana-crowdfunding-frontend-files.png?raw=true)\n\nWe will create a basic UI for the app. I have used sementic-ui to do that.\n\nIf you want the UI part only and continue on with integrating the Solana web3.js library, you can use the UI template I created for you from this [GitHub branch](https://github.com/SushantChandla/solana-crowd-funding/tree/ui).\n\n**@solana/web3.js**\nLet us add the `@solana/web3.js` package.\n\n```text\nyarn add @solana/web3.js\n```\n\nWe will also use the `@project-serum/sol-wallet-adapter` package to connect our app with sollet wallet.\n\n```text\nyarn add @project-serum/sol-wallet-adapter\n```\n\nAnd we will also need borsh for serialization and deserialization.\n\n```text\nyarn add borsh\n```\n\nLet us create a new directory named `solana` in our `crowd-funding/src` directory. We will write all the Solana related code in this folder for easy reference.\n\n\nCreate a new file in the `solana` directory, `index.js`, and add the following code:\n\n```js\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\nimport {\n    Connection,\n    SystemProgram,\n    Transaction,\n    PublicKey,\n    TransactionInstruction\n} from \"@solana/web3.js\";\nimport { deserialize, serialize } from \"borsh\";\n```\n\nSolana calls its networks **clusters**, if you have by any chance deployed the program on testnet/mainnet, you will need to change the cluster variable to the URL for that cluster.\nAlso update the programId, this should be the public key you got after deploying your program.\n\n```js\nconst cluster = \"https://api.devnet.solana.com\";\nconst connection = new Connection(cluster, \"confirmed\");\nconst wallet = new Wallet(\"https://www.sollet.io\", cluster);\nconst programId= new PublicKey(\n\t\"286rapsUbvDe1ZgBeNhp37YHvEPwWPTr4Bkce4oMpUKT\"\n);\n```\n\nNext, create two helper functions: `setPayerAndBlockhashTrasaction` and `signAndSendTrasaction`.\nThe `setPayerAndBlockhashTransaction` takes in `instructions` as parameters. `instructions` will contain all the instructions we want to perform in this transaction.\n\u003e Note: If any of the instructions fails with a program error, all the instructions in the transaction fail.\n\n```js\nexport async function setPayerAndBlockhashTransaction(instructions) {\n    const transaction = new Transaction();\n    instructions.forEach(element =\u003e {\n        transaction.add(element);\n    });\n    transaction.feePayer = wallet.publicKey;\n    let hash = await connection.getRecentBlockhash();\n    transaction.recentBlockhash = hash.blockhash;\n    return transaction;\n}\n```\n\n`setPayerAndBlockhashTransaction` returns the `transaction` object containing the instructions and we can pass it to the `signAndSendTransaction` function to make our transaction.\n\n```js\nexport async function signAndSendTransaction(transaction) {\n    try {\n        console.log(\"start signAndSendTransaction\");\n        let signedTrans = await wallet.signTransaction(transaction);\n        console.log(\"signed transaction\");\n        let signature = await connection.sendRawTransaction(\n            signedTrans.serialize()\n        );\n        console.log(\"end signAndSendTransaction\");\n        return signature;\n    } catch (err) {\n        console.log(\"signAndSendTransaction error\", err);\n        throw err;\n    }\n}\n```\n\n## Writing a function to invoke create_campaign instruction.\nWe need to write a JavaScript implementation for the Rust struct `CampaignDetails`. We have created a class and we will call it `CampaignDetails`. For deserialization and serialization we have to create a schema for our class. We will create map, and match the types of each field. Note that `PubKey` type is nothing but a u8 array with length 32.\n\n```js\nclass CampaignDetails {\n    constructor(properties) {\n        Object.keys(properties).forEach((key) =\u003e {\n            this[key] = properties[key];\n        });\n    }\n    static schema = new Map([[CampaignDetails,\n        {\n            kind: 'struct',\n            fields: [\n                ['admin', [32]],\n                ['name', 'string'],\n                ['description', 'string'],\n                ['image_link', 'string'],\n                ['amount_donated', 'u64']]\n        }]]);\n}\n```\n\nNow we can write our `createCampaign` function.\nThis function takes `name`,`description` and `image_link` as input parameters.\n\nThe first thing we will do it to add a call to `checkWallet` function.\n\n```js\nexport async function createCampaign(\n    name, description, image_link\n) {\n     await checkWallet();\n```\n\ncheckWallet function:\n\nWe will check if the wallet is connected or not, and connect if it isn't.\n\n```js\nasync function checkWallet() {\n    if (!wallet.connected()) {\n        await wallet.connect();\n    }\n}\n```\n\nWe will create a pubkey for our program account which will contain the data of a campaign, this is `writing_account` we have used in our program. \n\n```js\n    const SEED = \"abcdef\" + Math.random().toString();\n    let newAccount = await PublicKey.createWithSeed(\n        wallet.publicKey,\n        SEED,\n        programId\n    );\n```\n\nNow we have created a publicKey. Note that we have not given an instruction to create an account yet.\n\nLet us setup the campaignDetails we want to send to our program.\n\n```js\n    let campaign =new CampaignDetails({\n        name: name,\n        description: description,\n        image_link: image_link,\n        admin: wallet.publicKey.toBuffer(),\n        amount_donated: 0\n    })\n```\n\nConvert the data to `Uint8Array`. Note that all the programs have the `instruction_data` datatype, an array of u8.\nAnd before we send this data remember we want the first element in our instruction_data to be (0,1,2) for calling different entry points.\nWe will set it to 0. As we want to call `create_campaign` instruction. \n\n```js\n    let data = serialize(CampaignDetails.schema, campaign);\n    let data_to_send = new Uint8Array([0, ...data]);\n```\n\nNow we have the data we want to send to our program.\n\nWe will fund it with the minimum number of lamports required to make it rent Exempt.\nSo we calculate the lamports required like this.\n\n```js\n    const lamports =\n        (await connection.getMinimumBalanceForRentExemption(data.length));\n```\n\nHere we create the instruction to create our account we will pass in the pub key, the size of data it needs to store, initial lamports, and other parameters.\nThis is the first instruction we will create.\n\u003e Note: Only system program can create accounts. We are writing instruction for system program here and not our deployed program.\n\n```js\n    const createProgramAccount = SystemProgram.createAccountWithSeed({\n        fromPubkey: wallet.publicKey,\n        basePubkey: wallet.publicKey,\n        seed: SEED,\n        newAccountPubkey: newAccount,\n        lamports: lamports,\n        space: data.length,\n        programId: programId,\n    });\n```\n\nNow we can create the 2nd instruction. We invoke our program that would write the data to the program account we just created in the above instruction.\n\nIn the keys parameter we will pass all accounts we want to send and in data (`instruction_data` for our program) we want to send, we will pass the programId we want to invoke. Note we have created programId global variable in this file already.\n\n```js\n    const instructionTOOurProgram = new TransactionInstruction({\n         keys: [\n            { pubkey: newAccount, isSigner: false, isWritable: true },\n            { pubkey: wallet.publicKey, isSigner: true, isWritable: false },\n        ],\n        programId: programId,\n        data: data_to_send,\n    });\n```\n\nNow we have created the instructions we want. We will pass them to our helper function `setPayerAndBlockhashTransaction` which would create a instance `Transaction` for our `instructions` which we can then pass to `signAndSendTransaction`.\n\n```js\n    const trans = await setPayerAndBlockhashTransaction(\n        [createProgramAccount,\n            instructionTOOurProgram]\n    );\n    const signature = await signAndSendTransaction(trans);\n```\n\nNow that is done we can confirm our transaction by passing the `signature` in `confirmTransaction` function.\n\n```js\n    const result = await connection.confirmTransaction(signature);\n    console.log(\"end sendMessage\", result);\n}\n```\n\nNow we can go ahead and connect this function to our front-end with our Form.\n\nSo in our `form.js`, we can have an on submit. On calling this function we will see a sollet dialog. Which would ask us to sign the transaction.\n\n```js\n  const onSubmit = async (e) =\u003e {\n        e.preventDefault();\n        await createCampaign(name, description, image);\n        setRoute(0);// we are updated this to change the ui.\n    }\n```\n\nSee the final [`form.js`](https://github.com/SushantChandla/solana-crowd-funding/blob/main/src/components/Form.js) file for reference.\nNow we can add campaigns.\n\n## Fetch all Campaigns\n\nWe have implemented a function to add campaigns, but we do not have any function to fetch all the campaigns. Let's make that.\n\nWe know we have added all the data in program accounts, so we can fetch all the program accounts by using `getProgramAccounts` on connection.\nThis will return us a list of accounts and their public keys. Now we can deserialize the data of an account by using the borsh package and convert the data into a desirable list and return it.\n\n```js\nexport async function getAllCampaigns() {\n    let accounts = await connection.getProgramAccounts(programId);\n    let campaigns = []\n    accounts.forEach((e) =\u003e {\n        try {\n            let campData = deserialize(CampaignDetails.schema, CampaignDetails, e.account.data);\n            campaigns.push({\n                pubId: e.pubkey,\n                name: campData.name,\n                description: campData.description,\n                image_link: campData.image_link,\n                amount_donated: campData.amount_donated,\n                admin: campData.admin,\n            });\n        } catch (err) {\n            console.log(err);\n        }\n    });\n    return campaigns;\n}\n```\n\nThen we can use this in `app.js`, we can render cards with this data. Add this code to `app.js`:\n\n```js\nuseEffect(() =\u003e {\n    getAllCampaigns().then((val) =\u003e {\n      setCards(val);\n      console.log(val);\n    });\n  }, []);\n```\n\nSee the final [`app.js`](https://github.com/SushantChandla/solana-crowd-funding/blob/main/src/App.js) file for reference.\n\n![Result](https://i.imgur.com/wjFVAaC.gif)\n\n## The donate function\n\nFor donating, we will again create an program account and we will fund it with the amount we want to donate. As we discussed while writing our program it is not possible to decrease the balance of an account that is not owned by our program.\n\nOur function will take in the `campaignPubKey`, and `amount` as parameters.\n- `amount`: the amount of Solana token we want to donate.\n- `campaignPubKey`: public key of the account we want to send tokens to. This is the same account where the data related to this campaign is stored.\n\n```js\nexport async function donateToCampaign(\n    campaignPubKey, amount\n) {\n    await checkWallet();\n\n    const SEED = \"abcdef\" + Math.random().toString();\n    let newAccount = await PublicKey.createWithSeed(\n        wallet.publicKey,\n        SEED,\n        programId\n    );\n\n    const createProgramAccount = SystemProgram.createAccountWithSeed({\n        fromPubkey: wallet.publicKey,\n        basePubkey: wallet.publicKey,\n        seed: SEED,\n        newAccountPubkey: newAccount,\n        lamports: amount,\n        space: 1,\n        programId: programId,\n    });\n```\n\nThis is similar to `createCampaign` function.\nHere I have set the space as `1`, because I want the account to get deleted when its balance becomes zero. And we are setting the initial lamports equal to the number of Solana tokens we want to donate.\n\nThen we will pass 3 keys (Accounts) as our program needs 3 accounts (see `donate` function implementation in the program).\n\nWe are sending data as an array, [2], because we want call the donate function in the program and we have mapped it to the 2 value of the first element in the `instruction_data` array.\n\n```js\n   const instructionTOOurProgram = new TransactionInstruction({\n        keys: [\n            { pubkey: campaignPubKey, isSigner: false, isWritable: true },\n            { pubkey: newAccount, isSigner: false, },\n            { pubkey: wallet.publicKey, isSigner: true, }\n        ],\n        programId: programId,\n        data:new Uint8Array([2])\n    });\n\n    const trans = await setPayerAndBlockhashTransaction(\n        [createProgramAccount, instructionTOOurProgram]\n    );\n    const signature = await signAndSendTransaction(trans);\n    const result = await connection.confirmTransaction(signature);\n    console.log(\"end sendMessage\", result);\n}\n```\n\nWe have created instructions to our program and then called the `setPayerAndBlockhashTransaction`, `signAndSendTransaction` and `confirmTransaction` to send and confirm the transaction just like we did in the `createCampaign` function.\n\nWe can connect this function with the UI. In `card.js`, update the `onDonate` function:\n\n```js\n   const onDonate = async (e) =\u003e {\n        e.preventDefault();\n        await donateToCampaign(data.id, amount);\n        let newCards = await getAllCampaigns();\n        setCards(newCards);\n    }\n```\n\nSee the final [`card.js`](https://github.com/SushantChandla/solana-crowd-funding/blob/main/src/components/Card.js) file for reference.\n\n\n![Result](https://i.imgur.com/0yahyH7.gif)\n\n## The withdraw function\n\nNow we will write the withdraw function. For withdrawls, we don't have to create a program account, and we will only pass one instruction. Since we are using a `WithdrawRequest` struct in our program, we will have to create a class and schema for borsh serialization. Let's set that up now:\n\n```js\nclass WithdrawRequest {\n    constructor(properties) {\n        Object.keys(properties).forEach((key) =\u003e {\n            this[key] = properties[key];\n        });\n    }\n    static schema = new Map([[WithdrawRequest,\n        {\n            kind: 'struct',\n            fields: [\n                ['amount', 'u64'],\n            ]\n        }]]);\n\n}\n```\n\nWe have created the schema with the amount as `u64` which is the datatype of the variable in Rust. Now let us write the actual function. Our function will take in the parameter `campaignPubKey` and the `amount` we want to withdraw. Then we will serialize the data. First, we will create the `WithdrawRequest` object, and then with the help of the schema, we have as a static member in `WithdrawRequest` class.\n\n```js\nexport async function withdraw(\n    campaignPubKey, amount\n) {\n    await checkWallet();\n\n let withdrawRequest = new WithdrawRequest({ amount: amount });\n    let data = serialize(WithdrawRequest.schema, withdrawRequest);\n    let data_to_send = new Uint8Array([1, ...data]);\n```\n\nThen we will create the instruction and pass the data. Note that we are inserting `1` in our `data_to_send` before sending.\n\n```js\n    const instructionTOOurProgram = new TransactionInstruction({\n        keys: [\n            { pubkey: campaignPubKey, isSigner: false, isWritable: true },\n            { pubkey: wallet.publicKey, isSigner: true, }\n        ],\n        programId: programId,\n        data: data_to_send\n    });\n```\n\nThis part of the code is same as the `donate` and `createCampaign` functions.\n\n```js\n    const trans = await setPayerAndBlockhashTransaction(\n        [instructionTOOurProgram]\n    );\n    const signature = await signAndSendTransaction(trans);\n    const result = await connection.confirmTransaction(signature);\n    console.log(\"end sendMessage\", result);\n}\n```\n\nConnect the functions with the UI in `card.js`:\n\n```js\n const onWithdraw = async (e) =\u003e {\n        e.preventDefault();\n        try {\n            await withdraw(data.id, amount);\n            alert('Withdraw successful!');\n        } catch (e) {\n            console.log(e);\n            alert(\"only admin can withdraw\");\n        }\n        let newCards = await getAllCampaigns();\n        setCards(newCards);\n\n    }\n```\n\nSee the final [`card.js`](https://github.com/SushantChandla/solana-crowd-funding/blob/main/src/components/Card.js) file.\n\nAnd we're done! \n\nYou can see the whole project on [github](https://github.com/SushantChandla/solana-crowd-funding).\n\n\n# Conclusion\n\nIn this tutorial, you learned how to build a Crowd Funding app on Solana. We covered the on-chain program's code using the Rust programming language. We built the User Interface with React.\n\n# About the Author\nThis tutorial was created by [Sushant Chandla](https://github.com/SushantChandla).\n","lastSyncedAt":"2022-01-07T06:02:30.957Z","nextSlug":null,"previousSlug":null,"userTutorial":null,"protocol":{"__ref":"Protocol:2613e4e6-4bfa-46a3-9c16-f9954f078811"},"pathway":null,"languages":[{"__ref":"Tagging:4663f4af-69a4-409d-b3ac-4f7c985d8692"},{"__ref":"Tagging:a7d7e151-7960-4f1c-a9cc-ac876b34d5bb"}],"technologies":[{"__ref":"Tagging:4a6940cb-e7ed-4be0-9214-fd237ed67fe4"},{"__ref":"Tagging:46ad97fa-3f7c-42aa-b78f-1414831d2a54"},{"__ref":"Tagging:a277735c-88e7-4807-a2dd-b5f9dc91fbad"}],"timeCommitments":[{"__ref":"Tagging:90ca772b-70c3-4d43-8d7b-69d949bc431c"}],"difficultyLevels":[{"__ref":"Tagging:a639322e-68d1-4357-b0d1-7694d1a3a2e0"}],"next":null,"previous":null},"ROOT_QUERY":{"__typename":"Query","tutorial({\"id\":\"build-a-crowdfunding-platform-on-solana\"})":{"__ref":"Tutorial:0a05b21c-7bf8-4833-8c95-7aa15025f73c"}}}},"__N_SSP":true},"page":"/tutorials/[slug]","query":{"slug":"build-a-crowdfunding-platform-on-solana"},"buildId":"1645443189281","isFallback":false,"gssp":true,"appGip":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ca2619bef4c28ebde3ce.js"></script><script src="/_next/static/chunks/webpack-245f049e565ebf942e09.js" async=""></script><script src="/_next/static/chunks/framework.50c3b31bc23dfcb1af3f.js" async=""></script><script src="/_next/static/chunks/commons.ddb2e14391079c43cb49.js" async=""></script><script src="/_next/static/chunks/main-25fc920f772e67fecae2.js" async=""></script><script src="/_next/static/chunks/dbf3ce33.e6c798310b4bf94aca8d.js" async=""></script><script src="/_next/static/chunks/8e1f0915.34e373399cdc573d23ed.js" async=""></script><script src="/_next/static/chunks/b01fe1c42598008edad838ff30555de8b4c045e1.e2086c787942ad8a7fb9.js" async=""></script><script src="/_next/static/chunks/8b49e28cc21143da57bf00148fda89c72870a32b.637e67a1d5e6f4b98178.js" async=""></script><script src="/_next/static/chunks/pages/_app-c104d3c1a7a705b1d881.js" async=""></script><script src="/_next/static/chunks/29107295.29a2f28ca1ff4763c79e.js" async=""></script><script src="/_next/static/chunks/75fc9c18.46f8ef1c317b30a0f302.js" async=""></script><script src="/_next/static/chunks/3b6638a962bc7f327b5fdc74c1facc631713c58f.552218fdee77482c974b.js" async=""></script><script src="/_next/static/chunks/3b6638a962bc7f327b5fdc74c1facc631713c58f_CSS.210d3c80a2b0e2401248.js" async=""></script><script src="/_next/static/chunks/c56c1b39b7bcb663437942577d79998a390126ba.74b349d7ca792dc60ed5.js" async=""></script><script src="/_next/static/chunks/04a1b8442da912f7ea49e1aa011f4dcb94f4da84.d13313c29c2d6a9c983e.js" async=""></script><script src="/_next/static/chunks/pages/tutorials/%5Bslug%5D-0d2881e80540e64dc599.js" async=""></script><script src="/_next/static/1645443189281/_buildManifest.js" async=""></script><script src="/_next/static/1645443189281/_ssgManifest.js" async=""></script></body></html>